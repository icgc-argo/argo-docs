{
  "schemas": {
    "treatment": {
      "updated": {
        "is_primary_treatment": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "treatment_start_interval": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "treatment_duration": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "days_per_cycle": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "number_of_cycles": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "treatment_intent": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "treatment_setting": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "response_to_treatment_criteria_method": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "response_to_treatment": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })",
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n\n    /* checks for a string just consisting of whitespace */\n    const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n    let codeList = [];\n    \n      switch ($row.response_to_treatment_criteria_method && $row.response_to_treatment_criteria_method.trim().toLowerCase()) {\n        case 'eln dohner aml 2017 oncology response criteria':\n          codeList = [\n            'complete remission',\n            'complete remission with incomplete hematologic recovery (cri)',\n            'complete remission without minimal residual disease (crmrd-)',\n            'hematologic relapse (after crmrd-, cr, cri)',\n            'molecular relapse (after crmrd-)',\n            'partial remission',\n            'progressive disease',\n            'stable disease'\n          ];\n          break;\n        case 'iwg cheson aml 2003 oncology response criteria':\n          codeList = [\n            'cytogenetic complete remission (crc)',\n            'molecular complete remission (crm)',\n            'morphologic complete remission',\n            'morphologic complete remission with incomplete blood count recovery (cri)',\n            'morphologic leukemia-free state',\n            'partial remission'\n          ];\n          break;\n        case 'irecist':\n          codeList = [\n            'immune complete response (icr)',\n            'immune confirmed progressive disease (icpd)',\n            'immune partial response (ipr)',\n            'immune stable disease (isd)',\n            'immune unconfirmed progressive disease (iupd)'\n          ];\n          break;\n        case 'recist':\n          codeList = [\n            'complete response',\n            'no evidence of disease (ned)',\n            'partial response',\n            'progressive disease',\n            'stable disease'\n          ];\n          break;\n        case 'response assessment in neuro-oncology (rano)':\n          codeList = [\n            'complete response',\n            'minor response',\n            'partial response',\n            'progressive disease',\n            'stable disease'\n          ];\n          break;\n        case 'physician assessed response criteria':\n          codeList = [\n            'physician assessed complete response',\n            'physician assessed partial response',\n            'physician assessed progressive disease',\n            'physician assessed stable disease'\n          ];\n          break;\n        default:\n          codelist = [];\n      }\n\n    if ($field && $field != null && !(checkforEmpty($field))) {\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\n        const msg = `'${$field}' is not a permissible value. When 'response_to_treatment_criteria_method' is set to '${\n          $row.response_to_treatment_criteria_method}', the '${$name}' field must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n\n        result.valid = false;\n        result.message = msg;\n      }\n    }\n    else {\n       if ($row.response_to_treatment_criteria_method && $row.response_to_treatment_criteria_method != null && !(checkforEmpty($row.response_to_treatment_criteria_method))) {\n         result = { valid: false, message: `The '${$name}' field must be submitted when 'response_to_treatment_criteria_method' is set to '${$row.response_to_treatment_criteria_method}'. The '${$name}' field must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`};\n       }\n    }\n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})",
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n\n    /* checks for a string just consisting of whitespace */\n    const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n    let codeList = [];\n    \n      switch ($row.response_to_treatment_criteria_method && $row.response_to_treatment_criteria_method.trim().toLowerCase()) {\n        case 'eln dohner aml 2017 oncology response criteria':\n          codeList = [\n            'complete remission',\n            'complete remission with incomplete hematologic recovery (cri)',\n            'complete remission without minimal residual disease (crmrd-)',\n            'hematologic relapse (after crmrd-, cr, cri)',\n            'molecular relapse (after crmrd-)',\n            'partial remission',\n            'progressive disease',\n            'stable disease'\n          ];\n          break;\n        case 'iwg cheson aml 2003 oncology response criteria':\n          codeList = [\n            'cytogenetic complete remission (crc)',\n            'molecular complete remission (crm)',\n            'morphologic complete remission',\n            'morphologic complete remission with incomplete blood count recovery (cri)',\n            'morphologic leukemia-free state',\n            'partial remission'\n          ];\n          break;\n        case 'irecist':\n          codeList = [\n            'immune complete response (icr)',\n            'immune confirmed progressive disease (icpd)',\n            'immune partial response (ipr)',\n            'immune stable disease (isd)',\n            'immune unconfirmed progressive disease (iupd)'\n          ];\n          break;\n        case 'recist':\n          codeList = [\n            'complete response',\n            'no evidence of disease (ned)',\n            'partial response',\n            'progressive disease',\n            'stable disease'\n          ];\n          break;\n        case 'response assessment in neuro-oncology (rano)':\n          codeList = [\n            'complete response',\n            'minor response',\n            'partial response',\n            'progressive disease',\n            'stable disease'\n          ];\n          break;\n        case 'physician assessed response criteria':\n          codeList = [\n            'physician assessed complete response',\n            'physician assessed partial response',\n            'physician assessed progressive disease',\n            'physician assessed stable disease'\n          ];\n          break;\n        default:\n          codelist = [];\n      }\n\n    if ($field && $field != null && !(checkforEmpty($field))) {\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\n        const msg = `'${$field}' is not a permissible value. When 'response_to_treatment_criteria_method' is set to '${\n          $row.response_to_treatment_criteria_method}', the '${$name}' field must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n\n        result.valid = false;\n        result.message = msg;\n      }\n    }\n    else {\n       if ($row.response_to_treatment_criteria_method && $row.response_to_treatment_criteria_method != null && !(checkforEmpty($row.response_to_treatment_criteria_method))) {\n         result = { valid: false, message: `The '${$name}' field must be submitted when 'response_to_treatment_criteria_method' is set to '${$row.response_to_treatment_criteria_method}'. The '${$name}' field must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`};\n       }\n    }\n    return result;\n  })"
              ]
            }
          }
        },
        "outcome_of_treatment": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        },
        "adverse_events": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const { $row, $name, $field } = inputs;\n        const result = { valid: true, message: 'Ok' };\n\n        const arrayItemsInSecondArray = (arr1, arr2) => {\n            return arr2.some(arr2Item => {\n                return arr1.includes(arr2Item);\n            });\n        };\n\n        const coreFields = [\n            'treatment_start_interval',\n            'treatment_duration',\n            'is_primary_treatment',\n            'treatment_intent',\n            'treatment_setting',\n            'response_to_treatment_criteria_method',\n            'response_to_treatment',\n        ];\n\n        const treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n        // checks for a string just consisting of whitespace\n        const checkforEmpty = entry => {\n            return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n        };\n        const treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n        const recordHasTreatments = !arrayItemsInSecondArray(\n            treatmentExceptionTypes,\n            treatmentTypes,\n        );\n\n        if (recordHasTreatments) {\n            if (\n                coreFields.includes($name) &&\n                (!$field || $field === null || checkforEmpty($field))\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n\n        } else if ($field && $field != null && !checkforEmpty($field)) {\n            if (\n                coreFields.includes($name) ||\n                (typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n                typeof $field === 'number'\n            ) {\n                return {\n                    valid: false,\n                    message: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n                };\n            }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\n\t\tconst { $row, $name, $field } = inputs;\n\t\tconst result = { valid: true, message: 'Ok' };\n\n\t\tconst arrayItemsInSecondArray = (arr1, arr2) => {\n\t\t\treturn arr2.some(arr2Item => {\n\t\t\t\treturn arr1.includes(arr2Item);\n\t\t\t});\n\t\t};\n\n\t\tconst coreFields = [\n\t\t\t'treatment_start_interval',\n\t\t\t'treatment_duration',\n\t\t\t'is_primary_treatment',\n\t\t\t'treatment_intent',\n\t\t\t'treatment_setting',\n\t\t\t'response_to_treatment_criteria_method',\n\t\t\t'response_to_treatment',\n\t\t];\n\n\t\tconst treatmentExceptionTypes = ['no treatment', 'unknown'];\n\n\t\tconst checkforInvalid = entry => {\n\t\t\t// note: negative numbers are allowed as per\n\t\t\t// https://github.com/icgc-argo/argo-dictionary/issues/432 */\n\n\t\t\treturn (\n\t\t\t\t// regular falsy values\n\t\t\t\t[null, undefined, ''].includes($field) ||\n\t\t\t\t// whitespace-filled strings\n\t\t\t\t/^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))\n\t\t\t);\n\t\t};\n\n\t\tconst treatmentTypes = $row.treatment_type.map(value => value.toLowerCase());\n\n\t\tconst recordHasTreatments = !arrayItemsInSecondArray(treatmentExceptionTypes, treatmentTypes);\n\n\t\tif (recordHasTreatments) {\n\t\t\tif (coreFields.includes($name) && checkforInvalid($field)) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field must be submitted when the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t} // otherwise, is there a valid value without a treatment defined\n\t\telse if (!checkforInvalid($field)) {\n\t\t\tif (\n\t\t\t\tcoreFields.includes($name) ||\n\t\t\t\t(typeof $field === 'string' && $field.trim().toLowerCase() != 'not applicable') ||\n\t\t\t\t!isNaN(parseFloat($field))\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tvalid: false,\n\t\t\t\t\tmessage: `The '${$name}' field cannot be submitted if the 'treatment_type' field is '${treatmentTypes}'`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t})"
              ]
            }
          }
        }
      },
      "created": {},
      "deleted": {}
    }
  }
}
