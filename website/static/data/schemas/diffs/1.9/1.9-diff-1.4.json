{
  "schemas": {
    "sample_registration": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_specimen_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "specimen_type": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n     \n      if ($row.tumour_normal_designation != null && $row.specimen_type != null) { \n         const designation = $row.tumour_normal_designation.trim().toLowerCase();\n         const specimen_type = $field.trim().toLowerCase();\n      \n         if (designation === \"normal\") {\n            const validTypes = [\"normal\", \"normal - tissue adjacent to primary tumour\", \"cell line - derived from normal\"];\n            if (!validTypes.includes(specimen_type)) {\n               result = {valid: false, message: \"Invalid specimen_type. Specimen_type can only be set to a normal type value (Normal, Normal - tissue adjacent to primary tumour, or Cell line - derived from normal) when the 'tumour_normal_designation' field is set to Normal.\"};\n            }\n         }\n         else if (designation === \"tumour\") {\n            const invalidTypes = [\"normal\", \"cell line - derived from normal\"];\n            if (invalidTypes.includes(specimen_type)) {\n               result = {valid: false, message: \"Invalid specimen_type. Specimen_type cannot be set to normal type value (Normal or Cell line - derived from normal) when 'tumour_normal_designation' field is set to Tumour.\"};\n            }\n         }\n      }\n      return result;\n   })"
              ],
              "right": [
                "(function validate(inputs) {\r\n      const {$row, $name, $field} = inputs;\r\n      const row = $row;\r\n      let result = {valid: true, message: \"Ok\"};\r\n      \r\n      const designation = row.tumour_normal_designation.trim().toLowerCase();\r\n      const specimen_type = $field.trim().toLowerCase();\r\n      \r\n      if (designation === \"normal\"){\r\n          const validTypes = [\"normal\", \"normal - tissue adjacent to primary tumour\", \"cell line - derived from normal\"];\r\n          if (!validTypes.includes(specimen_type)){\r\n              result = {valid: false, message: \"Invalid specimen_type. Specimen_type can only be set to a normal type value (Normal, Normal - tissue adjacent to primary tumour, or Cell line - derived from normal) when tumour_normal_designation is set to Normal.\"};\r\n          }\r\n      }\r\n      else if (designation === \"tumour\") {\r\n          const invalidTypes = [\"normal\", \"cell line - derived from normal\"];\r\n          if (invalidTypes.includes(specimen_type)){\r\n              result = {valid: false, message: \"Invalid specimen_type. Specimen_type cannot be set to normal type value (Normal or Cell line - derived from normal) when tumour_normal_designation is set to Tumour.\"};\r\n          }\r\n      }\r\n      return result;\r\n    })"
              ]
            }
          }
        },
        "submitter_sample_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        }
      },
      "created": {},
      "deleted": {}
    },
    "donor": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "cause_of_death": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const {$row, $name, $field} = inputs;\n        let result = {valid: true, message: \"Ok\"};\n        const currField = typeof($field) === 'string' ? $field.trim().toLowerCase() : $field;\n        \n        if ($row.vital_status != null) {\n           const vitalStatus = $row.vital_status.trim().toLowerCase();\n\n           if (!currField && vitalStatus === \"deceased\") {\n              result = {valid: false, message: `${$name} must be provided when the donor's vital_status is deceased.`}\n           }\n           else if (currField && vitalStatus != \"deceased\"){\n              result = {valid: false, message: `${$name} cannot be provided if the donor's vital_status is not deceased.`}\n           }\n        }\n        else if (($row.vital_status === null) && (currField)) {\n           result = {valid: false, message: `'${$name}' requires the 'vital_status' field.` }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\r\n        const {$row, $name, $field} = inputs;\r\n        let result = {valid: true, message: \"Ok\"};\r\n        const currField = typeof($field) === 'string' ? $field.trim().toLowerCase() : $field;\r\n        const vitalStatus = $row.vital_status.trim().toLowerCase();\r\n    \r\n        if (!currField && vitalStatus === \"deceased\"){\r\n            result = {valid: false, message: `${$name} must be provided when the donor's vital_status is deceased.`}\r\n        }\r\n        else if (currField && vitalStatus != \"deceased\"){\r\n            result = {valid: false, message: `${$name} cannot be provided if the donor's vital_status is not deceased.`}\r\n        }\r\n        return result;\r\n    })"
              ]
            }
          }
        },
        "survival_time": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n        const {$row, $name, $field} = inputs;\n        let result = {valid: true, message: \"Ok\"};\n        const currField = typeof($field) === 'string' ? $field.trim().toLowerCase() : $field;\n        \n        if ($row.vital_status != null) {\n           const vitalStatus = $row.vital_status.trim().toLowerCase();\n\n           if (!currField && vitalStatus === \"deceased\") {\n              result = {valid: false, message: `${$name} must be provided when the donor's vital_status is deceased.`}\n           }\n           else if (currField && vitalStatus != \"deceased\"){\n              result = {valid: false, message: `${$name} cannot be provided if the donor's vital_status is not deceased.`}\n           }\n        }\n        else if (($row.vital_status === null) && (currField)) {\n           result = {valid: false, message: `'${$name}' requires the 'vital_status' field.` }\n        }\n        return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\r\n        const {$row, $name, $field} = inputs;\r\n        let result = {valid: true, message: \"Ok\"};\r\n        const currField = typeof($field) === 'string' ? $field.trim().toLowerCase() : $field;\r\n        const vitalStatus = $row.vital_status.trim().toLowerCase();\r\n    \r\n        if (!currField && vitalStatus === \"deceased\"){\r\n            result = {valid: false, message: `${$name} must be provided when the donor's vital_status is deceased.`}\r\n        }\r\n        else if (currField && vitalStatus != \"deceased\"){\r\n            result = {valid: false, message: `${$name} cannot be provided if the donor's vital_status is not deceased.`}\r\n        }\r\n        return result;\r\n    })"
              ]
            },
            "range": { "left": { "exclusiveMin": 0 }, "right": null }
          }
        },
        "primary_site": {
          "meta": {
            "notes": {
              "left": "To include multiple values, separate values with a pipe delimiter '|' within your file.",
              "right": null
            },
            "examples": { "left": "Breast|Ovary", "right": null }
          },
          "restrictions": {
            "codeList": {
              "left": [
                "Accessory sinuses",
                "Adrenal gland",
                "Anus and anal canal",
                "Base of tongue",
                "Bladder",
                "Bones, joints and articular cartilage of limbs",
                "Bones, joints and articular cartilage of other and unspecified sites",
                "Brain",
                "Breast",
                "Bronchus and lung",
                "Cervix uteri",
                "Colon",
                "Connective, subcutaneous and other soft tissues",
                "Corpus uteri",
                "Esophagus",
                "Eye and adnexa",
                "Floor of mouth",
                "Gallbladder",
                "Gum",
                "Heart, mediastinum, and pleura",
                "Hematopoietic and reticuloendothelial systems",
                "Hypopharynx",
                "Kidney",
                "Larynx",
                "Lip",
                "Liver and intrahepatic bile ducts",
                "Lymph nodes",
                "Meninges",
                "Nasal cavity and middle ear",
                "Nasopharynx",
                "Oropharynx",
                "Other and ill-defined digestive organs",
                "Other and ill-defined sites",
                "Other and ill-defined sites in lip, oral cavity and pharynx",
                "Other and ill-defined sites within respiratory system and intrathoracic organs",
                "Other and unspecified female genital organs",
                "Other and unspecified major salivary glands",
                "Other and unspecified male genital organs",
                "Other and unspecified parts of biliary tract",
                "Other and unspecified parts of mouth",
                "Other and unspecified parts of tongue",
                "Other and unspecified urinary organs",
                "Other endocrine glands and related structures",
                "Ovary",
                "Palate",
                "Pancreas",
                "Parotid gland",
                "Penis",
                "Peripheral nerves and autonomic nervous system",
                "Placenta",
                "Prostate gland",
                "Pyriform sinus",
                "Rectosigmoid junction",
                "Rectum",
                "Renal pelvis",
                "Retroperitoneum and peritoneum",
                "Skin",
                "Small intestine",
                "Spinal cord, cranial nerves, and other parts of central nervous system",
                "Stomach",
                "Testis",
                "Thymus",
                "Thyroid gland",
                "Tonsil",
                "Trachea",
                "Ureter",
                "Uterus, NOS",
                "Vagina",
                "Vulva"
              ],
              "right": [
                "Accessory sinuses",
                "Adrenal gland",
                "Anus and anal canal",
                "Base of tongue",
                "Bladder",
                "Bones, joints and articular cartilage of limbs",
                "Bones, joints and articular cartilage of other and unspecified sites",
                "Brain",
                "Breast",
                "Bronchus and lung",
                "Cervix uteri",
                "Colon",
                "Connective, subcutaneous and other soft tissues",
                "Corpus uteri",
                "Esophagus",
                "Eye and adnexa",
                "Floor of mouth",
                "Gallbladder",
                "Gum",
                "Heart, mediastinum, and pleura",
                "Hematopoietic and reticuloendothelial systems",
                "Hypopharynx",
                "Kidney",
                "Larynx",
                "Lip",
                "Liver and intrahepatic bile ducts",
                "Lymph nodes",
                "Meninges",
                "Nasal cavity and middle ear",
                "Nasopharynx",
                "Not Reported",
                "Oropharynx",
                "Other and ill-defined digestive organs",
                "Other and ill-defined sites",
                "Other and ill-defined sites in lip, oral cavity and pharynx",
                "Other and ill-defined sites within respiratory system and intrathoracic organs",
                "Other and unspecified female genital organs",
                "Other and unspecified major salivary glands",
                "Other and unspecified male genital organs",
                "Other and unspecified parts of biliary tract",
                "Other and unspecified parts of mouth",
                "Other and unspecified parts of tongue",
                "Other and unspecified urinary organs",
                "Other endocrine glands and related structures",
                "Ovary",
                "Palate",
                "Pancreas",
                "Parotid gland",
                "Penis",
                "Peripheral nerves and autonomic nervous system",
                "Placenta",
                "Prostate gland",
                "Pyriform sinus",
                "Rectosigmoid junction",
                "Rectum",
                "Renal pelvis",
                "Retroperitoneum and peritoneum",
                "Skin",
                "Small intestine",
                "Spinal cord, cranial nerves, and other parts of central nervous system",
                "Stomach",
                "Testis",
                "Thymus",
                "Thyroid gland",
                "Tonsil",
                "Trachea",
                "Ureter",
                "Uterus, NOS",
                "Vagina",
                "Vulva",
                "Unknown"
              ],
              "data": { "added": ["Not Reported", "Unknown"], "deleted": [] }
            }
          }
        },
        "height": {
          "valueType": { "left": "number", "right": "integer" },
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        },
        "weight": {
          "valueType": { "left": "number", "right": "integer" },
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        },
        "bmi": {
          "valueType": { "left": "number", "right": "integer" },
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        },
        "menopause_status": {
          "description": {
            "left": "Indicate the donor's menopause status at the time of primary diagnosis. (Reference: caDSR CDE ID 2434914)",
            "right": "Indicate the donor's menopause status at the time of primary diagnosis. (Codelist reference: NCI CDE ID: 2434914)"
          },
          "restrictions": {
            "codeList": {
              "left": [
                "Not applicable",
                "Perimenopausal",
                "Postmenopausal",
                "Premenopausal",
                "Unknown"
              ],
              "right": [
                "Indeterminate or unknown",
                "Not applicable",
                "Perimenopausal",
                "Postmenopausal",
                "Premenopausal"
              ],
              "data": { "added": ["Indeterminate or unknown"], "deleted": ["Unknown"] }
            }
          }
        },
        "age_at_menarche": {
          "description": {
            "left": "Indicate the donor's age at which the first menstruation event occurred. (Reference: NCIt C19666)",
            "right": "Indicate the donor's age of menarche, the first occurrence of menstruation."
          },
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        },
        "number_of_pregnancies": {
          "description": {
            "left": "Indicate the total number of pregnancy events experienced by the donor. (Reference: NCIt C106551)",
            "right": "Indicate the number of pregnancies a donor has had."
          },
          "restrictions": { "range": { "left": { "min": 0 }, "right": null } }
        },
        "number_of_children": {
          "description": {
            "left": "Indicate the number of children the donor has birthed. (Reference: caDSR CDE ID 2486644)",
            "right": "Indicate the number of children the donor has birthed."
          },
          "restrictions": { "range": { "left": { "min": 0 }, "right": null } }
        }
      },
      "created": {
        "prior_malignancy": {
          "changeType": "created",
          "description": "Prior malignancy affecting donor.",
          "name": "prior_malignancy",
          "restrictions": { "codeList": ["Yes", "No", "Unknown"] },
          "valueType": "string",
          "meta": { "displayName": "Prior Malignancy", "examples": "C41.1, C16.9, C00.5, D46.9" }
        },
        "cancer_type_prior_malignancy": {
          "changeType": "created",
          "description": "The code to represent the cancer type of a prior malignancy using the WHO ICD-10 code (https://icd.who.int/browse10/2019/en) classification.",
          "name": "cancer_type_prior_malignancy",
          "restrictions": { "regex": "^[C|D][0-9]{2}(.[0-9]{1,3}[A-Z]{0,1})?$" },
          "valueType": "string",
          "meta": { "displayName": "Cancer Type Prior Malignancy" }
        },
        "age_at_prior_malignancy": {
          "changeType": "created",
          "description": "If donor has history of prior malignancy, indicate age at previous diagnosis, in years.",
          "name": "age_at_prior_malignancy",
          "valueType": "integer",
          "meta": { "displayName": "Age at Prior Malignancy" }
        },
        "laterality_of_prior_malignancy": {
          "changeType": "created",
          "description": "If donor has history of prior malignancy, indicate laterality of previous diagnosis. (Codelist reference: NCI CDE: 4122391)",
          "name": "laterality_of_prior_malignancy",
          "valueType": "string",
          "restrictions": {
            "codeList": [
              "Bilateral",
              "Left",
              "Midline",
              "Not applicable",
              "Right",
              "Unilateral",
              "Unilateral, side not specified",
              "Unknown"
            ]
          },
          "meta": { "displayName": "Laterality at Prior Malignancy" }
        }
      },
      "deleted": {
        "genetic_disorders": {
          "changeType": "deleted",
          "description": "Indicate presence of any hereditary genetic disorders. (Reference: Genetic disorder names were standardized using Orphanet (https://www.orpha.net/) and NCI Thesaurus)",
          "name": "genetic_disorders",
          "valueType": "string",
          "isArray": true,
          "restrictions": {
            "codeList": [
              "Alpha-1-antitrypsin Deficiency",
              "Ataxia Telangiectasia Syndrome",
              "BAP1-related Tumor Predisposition Syndrome",
              "Beckwith-Wiedemann Syndrome",
              "Birt-Hogg-Dub Syndrome",
              "Bloom Syndrome",
              "Carney Complex",
              "Cowden Syndrome",
              "Familial Adenomatous Polyposis Syndrome (FAP)",
              "Familial Atypical Multiple Mole Melanoma Syndrome (FAMMM)",
              "Familial Gastrointestinal Stromal Tumor",
              "Fanconi Anemia",
              "Gardner Syndrome",
              "Glycogen Storage Disease",
              "Gorlin Syndrome",
              "Hereditary Breast and Ovarian Cancer Syndrome (HBOC)",
              "Hereditary Diffuse Gastric Cancer",
              "Hereditary Leiomyomatosis and Renal Cell Cancer (HLRCC)",
              "Hereditary Pancreatitis",
              "Hereditary Papillary Renal Cell Carcinoma",
              "Hereditary Retinoblastoma",
              "Juvenile Polyposis Syndrome",
              "Li-Fraumeni Syndrome",
              "Lynch Syndrome",
              "Serrated Polyposis Syndrome",
              "Muir-Torre Syndrome",
              "Multiple Endocrine Neoplasia Type 1 (MEN1)",
              "Multiple Endocrine Neoplasia type 2 (MEN2)",
              "MUTYH Polyposis Syndrome",
              "Neurofibromatosis Type 1",
              "Neurofibromatosis Type 2",
              "Peutz-Jeghers Syndrome",
              "PTEN hamartoma Tumor Syndrome",
              "Rubinstein-Taybi Syndrome",
              "Sjogren Syndrome",
              "Tuberous Sclerosis Complex",
              "Turcot Syndrome",
              "Tyrosinemia Type 1",
              "von Hippel-Lindau Syndrome",
              "Werner Syndrome",
              "Wiskott-Aldrich Syndrome",
              "Xeroderma Pigmentosum"
            ]
          },
          "meta": {
            "displayName": "Genetic Disorders",
            "notes": "If the genetic disorder term you use is not included in the controlled terminology, please contact us at https://platform.icgc-argo.org/contact to request it be added. To include multiple values, separate values with a pipe delimiter '|' within your file.",
            "examples": "Familial Adenomatous Polyposis Syndrome (FAP)|Lynch Syndrome"
          }
        },
        "hrt_type": {
          "changeType": "deleted",
          "description": "Indicate the type of hormone replacement therapy (HRT) the patient has taken or is currently taking.",
          "name": "hrt_type",
          "restrictions": {
            "codeList": [
              "Combination HRT",
              "Estrogen-only HRT",
              "Injectable",
              "Never taken HRT",
              "Other",
              "Patch",
              "Pill",
              "Unknown"
            ]
          },
          "valueType": "string",
          "meta": { "displayName": "Hormone Replacement Therapy Type" }
        },
        "hrt_duration": {
          "changeType": "deleted",
          "description": "If patient has taken hormone replacement therapy (HRT), indicate how long patient has been taking HRT, in months. (Reference: caDSR CDE ID 5365433)",
          "name": "hrt_duration",
          "valueType": "integer",
          "restrictions": {
            "script": [
              "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      \n      /* checks for a string just consisting of whitespace */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n     \n      const type = $name.trim().toLowerCase().split('_duration')[0];\n      const hormoneType = type + `_type`;\n   \n      if ($field != null && !(checkforEmpty($field))) {\n        if (!$row[hormoneType] || $row[hormoneType] === null || checkforEmpty($row[hormoneType])) {\n           result = { valid: false, message: `Indicate type of ${type} taken in the '${hormoneType}' field if '${$name}' field is submitted.`};\n        }\n        else if ($row[hormoneType].toLowerCase() === \"never taken hrt\" || $row[hormoneType].toLowerCase() === \"never used hormonal contraception\") {\n           const submittedValue = $row[hormoneType].toLowerCase()\n           result = {valid: false, message: `If '${$name}' is submitted, then '${hormoneType}' field cannot be '${submittedValue}'.`};\n       }\n\n      }\n      return result;\n  })"
            ],
            "range": { "exclusiveMin": 0 }
          },
          "meta": {
            "displayName": "Hormone Replacement Therapy Duration",
            "units": "months",
            "dependsOn": "donor.hrt_type"
          }
        },
        "contraception_type": {
          "changeType": "deleted",
          "description": "Indicate the type of hormonal contraception the patient has taken or is currently taking. (Reference: caDSR CDE ID 3264234)",
          "name": "contraception_type",
          "restrictions": {
            "codeList": [
              "Combination pill",
              "Contraceptive implant",
              "Contraceptive patch",
              "Injectable",
              "Intrauterine device",
              "Never used hormonal contraception",
              "Other",
              "Progestin-only pill",
              "Unknown",
              "Vaginal ring"
            ]
          },
          "valueType": "string",
          "meta": { "displayName": "Contraception Type" }
        },
        "contraception_duration": {
          "changeType": "deleted",
          "description": "If patient has taken hormonal contraception, indicate duration of use, in months. (Reference: caDSR CDE ID 5206887)",
          "name": "contraception_duration",
          "valueType": "integer",
          "restrictions": {
            "script": [
              "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      \n      /* checks for a string just consisting of whitespace */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n     \n      const type = $name.trim().toLowerCase().split('_duration')[0];\n      const hormoneType = type + `_type`;\n   \n      if ($field != null && !(checkforEmpty($field))) {\n        if (!$row[hormoneType] || $row[hormoneType] === null || checkforEmpty($row[hormoneType])) {\n           result = { valid: false, message: `Indicate type of ${type} taken in the '${hormoneType}' field if '${$name}' field is submitted.`};\n        }\n        else if ($row[hormoneType].toLowerCase() === \"never taken hrt\" || $row[hormoneType].toLowerCase() === \"never used hormonal contraception\") {\n           const submittedValue = $row[hormoneType].toLowerCase()\n           result = {valid: false, message: `If '${$name}' is submitted, then '${hormoneType}' field cannot be '${submittedValue}'.`};\n       }\n\n      }\n      return result;\n  })"
            ],
            "range": { "exclusiveMin": 0 }
          },
          "meta": {
            "displayName": "Hormonal Contraception Duration",
            "units": "months",
            "dependsOn": "donor.contraception_type"
          }
        }
      }
    },
    "specimen": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_specimen_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_primary_diagnosis_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "pathological_tumour_staging_system": {
          "meta": { "validationDependency": { "left": true, "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\n    const listFormatter = arr => `${arr.map(entry => `\"${entry}\"`).join(', ')}`;\n\n   \n   /* Contingent on the naming system for tumour staging systems to remain consistent */\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_tumour_staging_system')[0];\n    const requiredFields = [\n      `${stagingName}_m_category`,\n      `${stagingName}_n_category`,\n      `${stagingName}_t_category`,\n    ];\n    const convertedRow = Object.fromEntries(\n      Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\n    );\n    /* Check for contigous spaces wrapped with quotes (empty strings) */\n    const checkforEmpty = entry => {\n      return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n    };\n\n    /* search for fields with falsy values*/\n    const emptyFields = requiredFields.filter(\n      field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\n    );\n\n    /* The staging system should be set to an AJCC option if the TNM fields are submitted */\n    if (!($field) && emptyFields.length != requiredFields.length) {\n       const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n       result = {\n         valid: false,\n         message:`The ${stagingName}_tumour_staging_system field must be set to an AJCC option when the following fields are submitted: ${listFormatter(\n            errorFields,\n          )}`,\n       };\n    }\n    /* This is not a required field, so first ensure that it exists */\n    else if ($field) {\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\n        result = {\n          valid: false,\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\n            emptyFields,\n          )}`,\n        };\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n        result = {\n          valid: false,\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\n            errorFields,\n          )}`,\n        };\n      }\n    }\n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\r\n    /* This is not a required field, so first ensure that it exists */\r\n    if ($field) {\r\n      /* Contingent on the naming system for tumour staging systems to remain consistent */\r\n      const stagingName = $name\r\n        .trim()\r\n        .toLowerCase()\r\n        .split('_tumour_staging_system')[0];\r\n      const requiredFields = [\r\n        `${stagingName}_m_category`,\r\n        `${stagingName}_n_category`,\r\n        `${stagingName}_t_category`,\r\n      ];\r\n      const convertedRow = Object.fromEntries(\r\n        Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\r\n      );\r\n      /* Check for contigous spaces wrapped with quotes (empty strings) */\r\n      const checkforEmpty = entry => {\r\n        return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\r\n      };\r\n\r\n      /* search for fields with falsy values*/\r\n      const emptyFields = requiredFields.filter(\r\n        field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\r\n      );\r\n\r\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\r\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\r\n            emptyFields,\r\n          )}`,\r\n        };\r\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\r\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\r\n            errorFields,\r\n          )}`,\r\n        };\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            }
          }
        },
        "pathological_stage_group": {
          "restrictions": {
            "codeList": {
              "left": [
                "Occult Carcinoma",
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage A",
                "Stage B",
                "Stage C",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IAB",
                "Stage IAE",
                "Stage IAES",
                "Stage IAS",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IBE",
                "Stage IBES",
                "Stage IBS",
                "Stage IC",
                "Stage IE",
                "Stage IEA",
                "Stage IEB",
                "Stage IES",
                "Stage II",
                "Stage II bulky",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIAE",
                "Stage IIAES",
                "Stage IIAS",
                "Stage IIB",
                "Stage IIBE",
                "Stage IIBES",
                "Stage IIBS",
                "Stage IIC",
                "Stage IIE",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIAE",
                "Stage IIIAES",
                "Stage IIIAS",
                "Stage IIIB",
                "Stage IIIBE",
                "Stage IIIBES",
                "Stage IIIBS",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IIIE",
                "Stage IIIES",
                "Stage IIIS",
                "Stage IIS",
                "Stage IS",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVAE",
                "Stage IVAES",
                "Stage IVAS",
                "Stage IVB",
                "Stage IVBE",
                "Stage IVBES",
                "Stage IVBS",
                "Stage IVC",
                "Stage IVE",
                "Stage IVES",
                "Stage IVS"
              ],
              "right": [
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IC",
                "Stage IS",
                "Stage IE",
                "Stage II",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIE",
                "Stage IIB",
                "Stage IIC",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIB",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVB",
                "Stage IVC",
                "Occult carcinoma",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage ISA",
                "Stage ISB",
                "Stage IEA",
                "Stage IEB",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage IIESA",
                "Stage IIESB",
                "Stage IIS",
                "Stage IISA",
                "Stage IISB",
                "Stage IIIE",
                "Stage IIIEA",
                "Stage IIIEB",
                "Stage IIIES",
                "Stage IIIESA",
                "Stage IIIESB",
                "Stage IIIS",
                "Stage IIISA",
                "Stage IIISB",
                "Stage IAB",
                "Stage A",
                "Stage B",
                "Stage C"
              ],
              "data": {
                "added": [
                  "Occult carcinoma",
                  "Stage ISA",
                  "Stage ISB",
                  "Stage IIESA",
                  "Stage IIESB",
                  "Stage IISA",
                  "Stage IISB",
                  "Stage IIIEA",
                  "Stage IIIEB",
                  "Stage IIIESA",
                  "Stage IIIESB",
                  "Stage IIISA",
                  "Stage IIISB"
                ],
                "deleted": [
                  "Occult Carcinoma",
                  "Stage IAE",
                  "Stage IAES",
                  "Stage IAS",
                  "Stage IBE",
                  "Stage IBES",
                  "Stage IBS",
                  "Stage IES",
                  "Stage II bulky",
                  "Stage IIAE",
                  "Stage IIAES",
                  "Stage IIAS",
                  "Stage IIBE",
                  "Stage IIBES",
                  "Stage IIBS",
                  "Stage IIIAE",
                  "Stage IIIAES",
                  "Stage IIIAS",
                  "Stage IIIBE",
                  "Stage IIIBES",
                  "Stage IIIBS",
                  "Stage IVAE",
                  "Stage IVAES",
                  "Stage IVAS",
                  "Stage IVBE",
                  "Stage IVBES",
                  "Stage IVBS",
                  "Stage IVE",
                  "Stage IVES",
                  "Stage IVS"
                ]
              }
            },
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_stage_group')[0];\n\n    const stagingSystem = stagingName + `_tumour_staging_system`;\n    \n    /* checks for a string just consisting of whitespace */\n    const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n \n    if ($row[stagingSystem] && (!$field || checkforEmpty($field))) {\n      result.valid = false;\n      const msg = `The ${stagingName}_stage_group must be submitted if the field ${stagingSystem} is submitted.`;\n      result.message = msg;\n    }\n    else if (!($row[stagingSystem]) && $field) {\n       result.valid = false;\n       const msg = `The field ${stagingSystem} must be submitted if ${stagingName}_stage_group is submitted.`;\n       result.message = msg;\n    }\n    else if ($row[stagingSystem] && $field) {\n      let codeList = [];\n      switch ($row[stagingSystem] && $row[stagingSystem].trim().toLowerCase()) {\n        case 'revised international staging system (riss)':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii'\n          ];\n          break;\n        case 'lugano staging system':\n          codeList = [\n             'stage i',\n             'stage ia',\n             'stage ib',\n             'stage ie',\n             'stage iea',\n             'stage ieb',\n             'stage ii',\n             'stage ii bulky',\n             'stage iia',\n             'stage iib',\n             'stage iie',\n             'stage iiea',\n             'stage iieb',\n             'stage iii',\n             'stage iiia',\n             'stage iiib',\n             'stage iv',\n             'stage iva',\n             'stage ivb'\n          ];\n          break;\n        case 'st jude staging system':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii',\n            'stage iv'\n          ];\n          break;\n        case 'ann arbor staging system':\n          codeList = [\n            'stage i',\n            'stage ia',\n            'stage ie',\n            'stage is',\n            'stage ies',\n            'stage iae',\n            'stage ias',\n            'stage iaes',\n            'stage ib',\n            'stage ibe',\n            'stage ibs',\n            'stage ibes',\n            'stage ii',\n            'stage iia',\n            'stage iie',\n            'stage iis',\n            'stage iies',\n            'stage iiae',\n            'stage iias',\n            'stage iiaes',\n            'stage iib',\n            'stage iibe',\n            'stage iibs',\n            'stage iibes',\n            'stage iii',\n            'stage iiia',\n            'stage iiie',\n            'stage iiis',\n            'stage iiies',\n            'stage iiiae',\n            'stage iiias',\n            'stage iiiaes',\n            'stage iiib',\n            'stage iiibe',\n            'stage iiibs',\n            'stage iiibes',\n            'stage iv',\n            'stage iva',\n            'stage ive',\n            'stage ivs',\n            'stage ives',\n            'stage ivae',\n            'stage ivas',\n            'stage ivaes',\n            'stage ivb',\n            'stage ivbe',\n            'stage ivbs',\n            'stage ivbes'\n          ];\n          break;\n        case 'rai staging system':\n          codeList = [\n             'stage 0',\n             'stage i',\n             'stage ii',\n             'stage iii',\n             'stage iv'\n          ];\n          break;\n        case 'durie-salmon staging system':\n          codeList = [\n            'stage 1',\n            'stage 1a',\n            'stage 1b',\n            'stage ii',\n            'stage iia',\n            'stage iib',\n            'stage iii',\n            'stage iiia',\n            'stage iiib'\n          ];\n          break;\n        case 'figo staging system':\n          codeList = [\n            'stage ia',\n            'stage ia1',\n            'stage ia2',\n            'stage ib',\n            'stage ib1',\n            'stage ib2',\n            'stage iia',\n            'stage iab',\n            'stage iiia',\n            'stage iiib',\n            'stage iva',\n            'stage ivb'\n          ];\n          break;\n        case 'binet staging system':\n          codeList = [\n             'stage a',\n             'stage b',\n             'stage c'\n         ];\n          break;\n        case 'ajcc 8th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\n          break;\n        case 'ajcc 7th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\n];\n          break;\n        default:\n          codelist = [];\n      }\n\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\n        const msg = `'${$field}' is not a permissible value. When '${stagingSystem}' is set to '${\n          $row[stagingSystem]\n        }', '${stagingName}_stage_group' must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n\n        result.valid = false;\n        result.message = msg;\n      }\n    }\n    \n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    if ($row.pathological_tumour_staging_system && $field) {\r\n      let codeList = [];\r\n      switch ($row.pathological_tumour_staging_system && $row.pathological_tumour_staging_system.trim().toLowerCase()) {\r\n        case 'revised international staging system (riss)':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii'\r\n          ];\r\n          break;\r\n        case 'lugano staging system':\r\n          codeList = [\r\n             'stage i',\r\n             'stage ia',\r\n             'stage ib',\r\n             'stage ie',\r\n             'stage iea',\r\n             'stage ieb',\r\n             'stage ii',\r\n             'stage iia',\r\n             'stage iib',\r\n             'stage iie',\r\n             'stage iiea',\r\n             'stage iieb',\r\n             'stage iii',\r\n             'stage iiia',\r\n             'stage iiib',\r\n             'stage iv',\r\n             'stage iva',\r\n             'stage ivb'\r\n          ];\r\n          break;\r\n        case 'st jude staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii',\r\n            'stage iv'\r\n          ];\r\n          break;\r\n        case 'ann arbor staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ia',\r\n            'stage ib',\r\n            'stage ie',\r\n            'stage is',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iie',\r\n            'stage iis',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iiie',\r\n            'stage iiis',\r\n            'stage iv',\r\n            'stage iva',\r\n            'stage ivb',\r\n            'stage ive',\r\n            'stage ivs'\r\n          ];\r\n          break;\r\n        case 'rai staging system':\r\n          codeList = [\r\n             'stage 0',\r\n             'stage i',\r\n             'stage ii',\r\n             'stage iii',\r\n             'stage iv'\r\n          ];\r\n          break;\r\n        case 'durie-salmon staging system':\r\n          codeList = [\r\n            'stage 1',\r\n            'stage 1a',\r\n            'stage 1b',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib'\r\n          ];\r\n          break;\r\n        case 'figo staging system':\r\n          codeList = [\r\n            'stage ia',\r\n            'stage ia1',\r\n            'stage ia2',\r\n            'stage ib',\r\n            'stage ib1',\r\n            'stage ib2',\r\n            'stage iia',\r\n            'stage iab',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iva',\r\n            'stage ivb'\r\n          ];\r\n          break;\r\n        case 'binet staging system':\r\n          codeList = [\r\n             'stage a',\r\n             'stage b',\r\n             'stage c'\r\n         ];\r\n          break;\r\n        case 'ajcc 8th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\r\n          break;\r\n        case 'ajcc 7th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\r\n];\r\n          break;\r\n        default:\r\n          codelist = [];\r\n      }\r\n\r\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\r\n        const msg = `'${$field}' is not a permissible value. When 'pathological_tumour_staging_system' is set to '${\r\n          $row.pathological_tumour_staging_system\r\n        }', 'pathological_stage_group' must be one of the following: \\n${codeList\r\n          .map(code => `- \"${code}\"`)\r\n          .join('\\n')}`;\r\n\r\n        result.valid = false;\r\n        result.message = msg;\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            }
          }
        },
        "specimen_acquisition_interval": {
          "restrictions": { "range": { "left": { "min": 0 }, "right": null } }
        },
        "specimen_storage": {
          "description": {
            "left": "Indicate the method of specimen storage for specimen that were not extracted freshly or immediately cultured.",
            "right": "Indicate the method of specimen storage for specimens that were not extracted freshly or immediately cultured."
          }
        },
        "tumour_grading_system": {
          "meta": { "validationDependency": { "left": true, "right": null } }
        },
        "tumour_grade": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    if ($row.tumour_grading_system && $field) {\n      let codeList = [];\n      const tieredGradingList = ['gx','g1','g2','g3'];\n      const gradingSystems = ['two-tier grading system', 'three-tier grading system', 'four-tier grading system', 'grading system for gists', 'grading system for gnets', 'isup grading system', 'who grading system for cns tumours', 'fnclcc grading system', 'gleason grade group system', 'scarff-bloom-richardson grading system', 'nuclear grading system for dcis'];\n      switch ($row.tumour_grading_system && $row.tumour_grading_system.trim().toLowerCase()) {\n        case 'two-tier grading system':\n          codeList = [\n            'low grade',\n            'high grade',\n          ];\n          break;\n        case 'three-tier grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'four-tier grading system':\n          codeList = [\n            'gx',\n            'g1',\n            'g2',\n            'g3',\n            'g4',\n          ];\n          break;\n        case 'grading system for gists':\n          codeList = [\n            'low',\n            'high',\n          ];\n          break;\n        case 'grading system for gnets':\n          codeList = tieredGradingList;\n          break;\n        case 'isup grading system':\n          codeList = [\n            'gx',\n            'g1',\n            'g2',\n            'g3',\n            'g4',\n          ];\n          break;\n        case 'who grading system for cns tumours':\n          codeList = [\n            'grade i',\n            'grade ii',\n            'grade iii',\n            'grade iv',\n          ];\n          break;\n        case 'fnclcc grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'gleason grade group system':\n          codeList = [\n            'grade group 1',\n            'grade group 2',\n            'grade group 3',\n            'grade group 4',\n            'grade group 5',\n          ];\n          break;\n        case 'scarff-bloom-richardson grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'nuclear grading system for dcis':\n          codeList = tieredGradingList;\n          break;\n      }\n\n      if (!codeList.includes($field.trim().toLowerCase())) {\n        const msg = `'${$field}' is not a permissible value. When 'tumour_grading_system' is set to '${\n          $row.tumour_grading_system\n        }', 'tumour_grade' must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n        result.valid = false;\n        result.message = msg;\n      }\n      else if (!gradingSystems.includes($row.tumour_grading_system.trim().toLowerCase())) {\n         result.valid = false;\n         const msg = `'${$row.tumour_grading_system}' is not a permissible value for 'tumour_grading_system'. If the tumour grading system you use is missing, please contact the DCC.`;\n         result.message = msg;\n      }\n    }\n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    if ($row.tumour_grading_system && $field) {\r\n      let codeList = [];\r\n      const tieredGradingList = ['gx','g1','g2','g3'];\r\n      const gradingSystems = ['two-tier grading system', 'three-tier grading system', 'four-tier grading system', 'grading system for gists', 'grading system for gnets', 'isup grading system', 'who grading system for cns tumours', 'fnclcc grading system', 'gleason grade group system', 'scarff-bloom-richardson grading system', 'nuclear grading system for dcis'];\r\n      switch ($row.tumour_grading_system && $row.tumour_grading_system.trim().toLowerCase()) {\r\n        case 'two-tier grading system':\r\n          codeList = [\r\n            'low grade',\r\n            'high grade',\r\n          ];\r\n          break;\r\n        case 'three-tier grading system':\r\n          codeList = tieredGradingList;\r\n          break;\r\n        case 'four-tier grading system':\r\n          codeList = [\r\n            'gx',\r\n            'g1',\r\n            'g2',\r\n            'g3',\r\n            'g4',\r\n          ];\r\n          break;\r\n        case 'grading system for gists':\r\n          codeList = [\r\n            'low',\r\n            'high',\r\n          ];\r\n          break;\r\n        case 'grading system for gnets':\r\n          codeList = tieredGradingList;\r\n          break;\r\n        case 'isup grading system':\r\n          codeList = [\r\n            'gx',\r\n            'g1',\r\n            'g2',\r\n            'g3',\r\n            'g4',\r\n          ];\r\n          break;\r\n        case 'who grading system for cns tumours':\r\n          codeList = [\r\n            'grade i',\r\n            'grade ii',\r\n            'grade iii',\r\n            'grade iv',\r\n          ];\r\n          break;\r\n        case 'fnclcc grading system':\r\n          codeList = tieredGradingList;\r\n          break;\r\n        case 'gleason grade group system':\r\n          codeList = [\r\n            'grade group 1',\r\n            'grade group 2',\r\n            'grade group 3',\r\n            'grade group 4',\r\n            'grade group 5',\r\n          ];\r\n          break;\r\n        case 'scarff-bloom-richardson grading system':\r\n          codeList = tieredGradingList;\r\n          break;\r\n        case 'nuclear grading system for dcis':\r\n          codeList = tieredGradingList;\r\n          break;\r\n      }\r\n\r\n      if (!codeList.includes($field.trim().toLowerCase())) {\r\n        const msg = `'${$field}' is not a permissible value. When 'tumour_grading_system' is set to '${\r\n          $row.tumour_grading_system\r\n        }', 'tumour_grade' must be one of the following: \\n${codeList\r\n          .map(code => `- \"${code}\"`)\r\n          .join('\\n')}`;\r\n        result.valid = false;\r\n        result.message = msg;\r\n      }\r\n      else if (!gradingSystems.includes($row.tumour_grading_system.trim().toLowerCase())) {\r\n         result.valid = false;\r\n         const msg = \"'${$row.tumour_grading_system}' is not a permissible value for 'tumour_grading_system'. If the tumour grading system you use is missing, please contact the DCC.\";\r\n         result.message = msg;\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            }
          }
        },
        "percent_tumour_cells": {
          "description": {
            "left": "Indicate a value, in decimals, that represents the percent of tumour cells compared to the number of total cells in a specimen. (Reference: NCIt: C159484)",
            "right": "Indicate a value, in decimals, that represents the percentage of infiltration by tumour cells in a specimen."
          },
          "restrictions": { "range": { "left": { "min": 0, "max": 1 }, "right": null } }
        },
        "percent_proliferating_cells": {
          "restrictions": { "range": { "left": { "min": 0, "max": 1 }, "right": null } }
        },
        "percent_inflammatory_tissue": {
          "description": {
            "left": "Indicate a value, in decimals, that represents the percent of a specimen that is positive for inflammatory markers, including the presence of capillary dilatation, edema and increased leukocytes. (Reference NCIt C159479)",
            "right": "Indicate a value, in decimals, that represents local response to cellular injury, marked by capillary dilatation, edema and leukocyte infiltration; clinically, inflammation is manifest by redness, heat, pain, swelling and loss of function, with the need to heal damaged tissue."
          },
          "restrictions": { "range": { "left": { "min": 0, "max": 1 }, "right": null } }
        },
        "percent_stromal_cells": {
          "description": {
            "left": "Indicate a value, in decimals, that represents the percentage of reactive cells that are present in a tumour specimen but are not malignant such as fibroblasts, vascular structures, etc. (Reference caDSR CDE ID 2841241)",
            "right": "Indicate a value, in decimals, that represents the percentage of reactive cells that are present in a malignant tumour specimen but are not malignant such as fibroblasts, vascular structures, etc."
          },
          "restrictions": { "range": { "left": { "min": 0, "max": 1 }, "right": null } }
        },
        "percent_necrosis": {
          "description": {
            "left": "Indicate a value, in decimals, that represents the percent of cells undergoing necrosis compared to the number of total cells present in a tumour specimen. (Reference NCIt C159481)",
            "right": "Indicate a value, in decimals, that represents the percentage of cell death in a malignant tumour specimen."
          },
          "restrictions": { "range": { "left": { "min": 0, "max": 1 }, "right": null } }
        }
      },
      "created": {},
      "deleted": {}
    },
    "primary_diagnosis": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_primary_diagnosis_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "age_at_diagnosis": {
          "restrictions": { "range": { "left": { "exclusiveMin": 0, "max": 90 }, "right": null } }
        },
        "number_lymph_nodes_examined": {
          "description": {
            "left": "The total number of lymph nodes tested for the presence of cancer. (Reference: caDSR CDE ID 3)",
            "right": "The total number of lymph nodes tested for the presence of cancer. (Reference: NCI CDE ID: 3)"
          },
          "meta": {
            "dependsOn": { "left": "primary_diagnosis.lymph_nodes_examined_status", "right": null }
          },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n\n      /* checks for a string just consisting of whitespacei */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n      \n      const numberLymphNodesExamined = $row.number_lymph_nodes_examined;\n      const numberLymphNodesPositive = $row.number_lymph_nodes_positive;\n      \n      if ($row.lymph_nodes_examined_status != null) {\n         const lymphNodesExaminedStatus = $row.lymph_nodes_examined_status.trim().toLowerCase();\n         /* if lymph nodes were examined and number_lymph_nodes_examined is submitted, it must be a value greater than 0. Otherwise, this field should be 0 or left blank. */\n         if (($name === \"number_lymph_nodes_examined\") && (!(checkforEmpty($field)))) {\n            if (lymphNodesExaminedStatus === \"yes\") { \n               if (parseInt($field) <= 0) {\n                  result = {\n                    valid: false,\n                    message: `The '${$name}' field must be a value greater than 0 if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n            }\n            else if (parseInt($field) > 0) {\n               result = {\n                 valid: false,\n                 message: `The '${$name}' field must be submitted as 0 or left blank if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n               };\n            }\n         }\n      \n         /* If lymph nodes were examined, number_lymph_nodes_positive must be submitted and it must be a value less than or equal to number_lymph_nodes_examined (if it is submitted). Otherwise, this field should not be submitted.*/\n         else if ($name === \"number_lymph_nodes_positive\") {\n            if (lymphNodesExaminedStatus === \"yes\") {\n               if (checkforEmpty($field) || $field == null) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n               else if (parseInt($field) < 0) {\n                  result = {\n                    valid: false,\n                    message: `The '${$name}' field must be a value greater than or equal to 0 if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n               else if ((!(checkforEmpty(numberLymphNodesExamined)) && ((parseInt($field) > parseInt(numberLymphNodesExamined))))) {\n                  result = {\n                    valid: false,\n                    message: `The '${$name}' field must be a value less than or equal to 'number_lymph_nodes_examined' if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n            }\n            else if ($field || $field != null) {\n               result = {\n                 valid: false,\n                 message: `The '${$name}' field should not be submitted if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n               };\n            }\n        }\n     }\n     return result;\n})"
              ],
              "right": null
            },
            "range": { "left": { "min": 0 }, "right": null }
          }
        },
        "number_lymph_nodes_positive": {
          "description": {
            "left": "The number of regional lymph nodes reported as being positive for tumour metastases. (Reference: caDSR CDE ID 6113694)",
            "right": "The number of regional lymph nodes reported as being positive for tumour metastases. (Reference: NCI CDE ID: 6113694)"
          },
          "meta": {
            "dependsOn": { "left": "primary_diagnosis.lymph_nodes_examined_status", "right": null },
            "notes": {
              "left": "This field is only required if 'lymph_nodes_examined_status' is 'Yes'.",
              "right": null
            }
          },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n\n      /* checks for a string just consisting of whitespacei */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n      \n      const numberLymphNodesExamined = $row.number_lymph_nodes_examined;\n      const numberLymphNodesPositive = $row.number_lymph_nodes_positive;\n      \n      if ($row.lymph_nodes_examined_status != null) {\n         const lymphNodesExaminedStatus = $row.lymph_nodes_examined_status.trim().toLowerCase();\n         /* if lymph nodes were examined and number_lymph_nodes_examined is submitted, it must be a value greater than 0. Otherwise, this field should be 0 or left blank. */\n         if (($name === \"number_lymph_nodes_examined\") && (!(checkforEmpty($field)))) {\n            if (lymphNodesExaminedStatus === \"yes\") { \n               if (parseInt($field) <= 0) {\n                  result = {\n                    valid: false,\n                    message: `The '${$name}' field must be a value greater than 0 if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n            }\n            else if (parseInt($field) > 0) {\n               result = {\n                 valid: false,\n                 message: `The '${$name}' field must be submitted as 0 or left blank if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n               };\n            }\n         }\n      \n         /* If lymph nodes were examined, number_lymph_nodes_positive must be submitted and it must be a value less than or equal to number_lymph_nodes_examined (if it is submitted). Otherwise, this field should not be submitted.*/\n         else if ($name === \"number_lymph_nodes_positive\") {\n            if (lymphNodesExaminedStatus === \"yes\") {\n               if (checkforEmpty($field) || $field == null) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n               else if (parseInt($field) < 0) {\n                  result = {\n                    valid: false,\n                    message: `The '${$name}' field must be a value greater than or equal to 0 if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n               else if ((!(checkforEmpty(numberLymphNodesExamined)) && ((parseInt($field) > parseInt(numberLymphNodesExamined))))) {\n                  result = {\n                    valid: false,\n                    message: `The '${$name}' field must be a value less than or equal to 'number_lymph_nodes_examined' if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n                  };\n               }\n            }\n            else if ($field || $field != null) {\n               result = {\n                 valid: false,\n                 message: `The '${$name}' field should not be submitted if 'lymph_nodes_examined_status' is '${lymphNodesExaminedStatus}'`\n               };\n            }\n        }\n     }\n     return result;\n})"
              ],
              "right": null
            },
            "range": { "left": { "min": 0 }, "right": null },
            "required": { "left": null, "right": true }
          }
        },
        "clinical_tumour_staging_system": {
          "meta": { "validationDependency": { "left": true, "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\n    const listFormatter = arr => `${arr.map(entry => `\"${entry}\"`).join(', ')}`;\n\n   \n   /* Contingent on the naming system for tumour staging systems to remain consistent */\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_tumour_staging_system')[0];\n    const requiredFields = [\n      `${stagingName}_m_category`,\n      `${stagingName}_n_category`,\n      `${stagingName}_t_category`,\n    ];\n    const convertedRow = Object.fromEntries(\n      Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\n    );\n    /* Check for contigous spaces wrapped with quotes (empty strings) */\n    const checkforEmpty = entry => {\n      return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n    };\n\n    /* search for fields with falsy values*/\n    const emptyFields = requiredFields.filter(\n      field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\n    );\n\n    /* The staging system should be set to an AJCC option if the TNM fields are submitted */\n    if (!($field) && emptyFields.length != requiredFields.length) {\n       const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n       result = {\n         valid: false,\n         message:`The ${stagingName}_tumour_staging_system field must be set to an AJCC option when the following fields are submitted: ${listFormatter(\n            errorFields,\n          )}`,\n       };\n    }\n    /* This is not a required field, so first ensure that it exists */\n    else if ($field) {\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\n        result = {\n          valid: false,\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\n            emptyFields,\n          )}`,\n        };\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n        result = {\n          valid: false,\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\n            errorFields,\n          )}`,\n        };\n      }\n    }\n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\r\n    /* This is not a required field, so first ensure that it exists */\r\n    if ($field) {\r\n      /* Contingent on the naming system for tumour staging systems to remain consistent */\r\n      const stagingName = $name\r\n        .trim()\r\n        .toLowerCase()\r\n        .split('_tumour_staging_system')[0];\r\n      const requiredFields = [\r\n        `${stagingName}_m_category`,\r\n        `${stagingName}_n_category`,\r\n        `${stagingName}_t_category`,\r\n      ];\r\n      const convertedRow = Object.fromEntries(\r\n        Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\r\n      );\r\n      /* Check for contigous spaces wrapped with quotes (empty strings) */\r\n      const checkforEmpty = entry => {\r\n        return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\r\n      };\r\n\r\n      /* search for fields with falsy values*/\r\n      const emptyFields = requiredFields.filter(\r\n        field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\r\n      );\r\n\r\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\r\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\r\n            emptyFields,\r\n          )}`,\r\n        };\r\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\r\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\r\n            errorFields,\r\n          )}`,\r\n        };\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            },
            "required": { "left": null, "right": true }
          }
        },
        "clinical_stage_group": {
          "description": {
            "left": "Stage group of the tumour, as assigned by the reporting clinical_tumour_staging_system, that indicates the overall prognostic tumour stage.",
            "right": "Stage group of the tumour, as assigned by the reporting clinical_tumour_staging_system, that indicates the overall prognostic tumour stage (ie. Stage I, Stage II, Stage III etc.)."
          },
          "meta": { "examples": { "left": "Stage I, Stage IIB", "right": null } },
          "restrictions": {
            "codeList": {
              "left": [
                "Occult Carcinoma",
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage A",
                "Stage B",
                "Stage C",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IAB",
                "Stage IAE",
                "Stage IAES",
                "Stage IAS",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IBE",
                "Stage IBES",
                "Stage IBS",
                "Stage IC",
                "Stage IE",
                "Stage IEA",
                "Stage IEB",
                "Stage IES",
                "Stage II",
                "Stage II bulky",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIAE",
                "Stage IIAES",
                "Stage IIAS",
                "Stage IIB",
                "Stage IIBE",
                "Stage IIBES",
                "Stage IIBS",
                "Stage IIC",
                "Stage IIE",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIAE",
                "Stage IIIAES",
                "Stage IIIAS",
                "Stage IIIB",
                "Stage IIIBE",
                "Stage IIIBES",
                "Stage IIIBS",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IIIE",
                "Stage IIIES",
                "Stage IIIS",
                "Stage IIS",
                "Stage IS",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVAE",
                "Stage IVAES",
                "Stage IVAS",
                "Stage IVB",
                "Stage IVBE",
                "Stage IVBES",
                "Stage IVBS",
                "Stage IVC",
                "Stage IVE",
                "Stage IVES",
                "Stage IVS"
              ],
              "right": [
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IC",
                "Stage IS",
                "Stage IE",
                "Stage II",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIE",
                "Stage IIB",
                "Stage IIC",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIB",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVB",
                "Stage IVC",
                "Occult carcinoma",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage ISA",
                "Stage ISB",
                "Stage IEA",
                "Stage IEB",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage IIESA",
                "Stage IIESB",
                "Stage IIS",
                "Stage IISA",
                "Stage IISB",
                "Stage IIIE",
                "Stage IIIEA",
                "Stage IIIEB",
                "Stage IIIES",
                "Stage IIIESA",
                "Stage IIIESB",
                "Stage IIIS",
                "Stage IIISA",
                "Stage IIISB",
                "Stage IAB",
                "Stage A",
                "Stage B",
                "Stage C"
              ],
              "data": {
                "added": [
                  "Occult carcinoma",
                  "Stage ISA",
                  "Stage ISB",
                  "Stage IIESA",
                  "Stage IIESB",
                  "Stage IISA",
                  "Stage IISB",
                  "Stage IIIEA",
                  "Stage IIIEB",
                  "Stage IIIESA",
                  "Stage IIIESB",
                  "Stage IIISA",
                  "Stage IIISB"
                ],
                "deleted": [
                  "Occult Carcinoma",
                  "Stage IAE",
                  "Stage IAES",
                  "Stage IAS",
                  "Stage IBE",
                  "Stage IBES",
                  "Stage IBS",
                  "Stage IES",
                  "Stage II bulky",
                  "Stage IIAE",
                  "Stage IIAES",
                  "Stage IIAS",
                  "Stage IIBE",
                  "Stage IIBES",
                  "Stage IIBS",
                  "Stage IIIAE",
                  "Stage IIIAES",
                  "Stage IIIAS",
                  "Stage IIIBE",
                  "Stage IIIBES",
                  "Stage IIIBS",
                  "Stage IVAE",
                  "Stage IVAES",
                  "Stage IVAS",
                  "Stage IVBE",
                  "Stage IVBES",
                  "Stage IVBS",
                  "Stage IVE",
                  "Stage IVES",
                  "Stage IVS"
                ]
              }
            },
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_stage_group')[0];\n\n    const stagingSystem = stagingName + `_tumour_staging_system`;\n    \n    /* checks for a string just consisting of whitespace */\n    const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n \n    if ($row[stagingSystem] && (!$field || checkforEmpty($field))) {\n      result.valid = false;\n      const msg = `The ${stagingName}_stage_group must be submitted if the field ${stagingSystem} is submitted.`;\n      result.message = msg;\n    }\n    else if (!($row[stagingSystem]) && $field) {\n       result.valid = false;\n       const msg = `The field ${stagingSystem} must be submitted if ${stagingName}_stage_group is submitted.`;\n       result.message = msg;\n    }\n    else if ($row[stagingSystem] && $field) {\n      let codeList = [];\n      switch ($row[stagingSystem] && $row[stagingSystem].trim().toLowerCase()) {\n        case 'revised international staging system (riss)':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii'\n          ];\n          break;\n        case 'lugano staging system':\n          codeList = [\n             'stage i',\n             'stage ia',\n             'stage ib',\n             'stage ie',\n             'stage iea',\n             'stage ieb',\n             'stage ii',\n             'stage ii bulky',\n             'stage iia',\n             'stage iib',\n             'stage iie',\n             'stage iiea',\n             'stage iieb',\n             'stage iii',\n             'stage iiia',\n             'stage iiib',\n             'stage iv',\n             'stage iva',\n             'stage ivb'\n          ];\n          break;\n        case 'st jude staging system':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii',\n            'stage iv'\n          ];\n          break;\n        case 'ann arbor staging system':\n          codeList = [\n            'stage i',\n            'stage ia',\n            'stage ie',\n            'stage is',\n            'stage ies',\n            'stage iae',\n            'stage ias',\n            'stage iaes',\n            'stage ib',\n            'stage ibe',\n            'stage ibs',\n            'stage ibes',\n            'stage ii',\n            'stage iia',\n            'stage iie',\n            'stage iis',\n            'stage iies',\n            'stage iiae',\n            'stage iias',\n            'stage iiaes',\n            'stage iib',\n            'stage iibe',\n            'stage iibs',\n            'stage iibes',\n            'stage iii',\n            'stage iiia',\n            'stage iiie',\n            'stage iiis',\n            'stage iiies',\n            'stage iiiae',\n            'stage iiias',\n            'stage iiiaes',\n            'stage iiib',\n            'stage iiibe',\n            'stage iiibs',\n            'stage iiibes',\n            'stage iv',\n            'stage iva',\n            'stage ive',\n            'stage ivs',\n            'stage ives',\n            'stage ivae',\n            'stage ivas',\n            'stage ivaes',\n            'stage ivb',\n            'stage ivbe',\n            'stage ivbs',\n            'stage ivbes'\n          ];\n          break;\n        case 'rai staging system':\n          codeList = [\n             'stage 0',\n             'stage i',\n             'stage ii',\n             'stage iii',\n             'stage iv'\n          ];\n          break;\n        case 'durie-salmon staging system':\n          codeList = [\n            'stage 1',\n            'stage 1a',\n            'stage 1b',\n            'stage ii',\n            'stage iia',\n            'stage iib',\n            'stage iii',\n            'stage iiia',\n            'stage iiib'\n          ];\n          break;\n        case 'figo staging system':\n          codeList = [\n            'stage ia',\n            'stage ia1',\n            'stage ia2',\n            'stage ib',\n            'stage ib1',\n            'stage ib2',\n            'stage iia',\n            'stage iab',\n            'stage iiia',\n            'stage iiib',\n            'stage iva',\n            'stage ivb'\n          ];\n          break;\n        case 'binet staging system':\n          codeList = [\n             'stage a',\n             'stage b',\n             'stage c'\n         ];\n          break;\n        case 'ajcc 8th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\n          break;\n        case 'ajcc 7th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\n];\n          break;\n        default:\n          codelist = [];\n      }\n\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\n        const msg = `'${$field}' is not a permissible value. When '${stagingSystem}' is set to '${\n          $row[stagingSystem]\n        }', '${stagingName}_stage_group' must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n\n        result.valid = false;\n        result.message = msg;\n      }\n    }\n    \n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    if ($row.clinical_tumour_staging_system && $field) {\r\n      let codeList = [];\r\n      switch ($row.clinical_tumour_staging_system && $row.clinical_tumour_staging_system.trim().toLowerCase()) {\r\n        case 'revised international staging system (riss)':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii'\r\n          ];\r\n          break;\r\n        case 'lugano staging system':\r\n          codeList = [\r\n             'stage i',\r\n             'stage ia',\r\n             'stage ib',\r\n             'stage ie',\r\n             'stage iea',\r\n             'stage ieb',\r\n             'stage ii',\r\n             'stage iia',\r\n             'stage iib',\r\n             'stage iie',\r\n             'stage iiea',\r\n             'stage iieb',\r\n             'stage iii',\r\n             'stage iiia',\r\n             'stage iiib',\r\n             'stage iv',\r\n             'stage iva',\r\n             'stage ivb'\r\n          ];\r\n          break;\r\n        case 'st jude staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii',\r\n            'stage iv'\r\n          ];\r\n          break;\r\n        case 'ann arbor staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ia',\r\n            'stage ib',\r\n            'stage ie',\r\n            'stage is',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iie',\r\n            'stage iis',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iiie',\r\n            'stage iiis',\r\n            'stage iv',\r\n            'stage iva',\r\n            'stage ivb',\r\n            'stage ive',\r\n            'stage ivs'\r\n          ];\r\n          break;\r\n        case 'rai staging system':\r\n          codeList = [\r\n             'stage 0',\r\n             'stage i',\r\n             'stage ii',\r\n             'stage iii',\r\n             'stage iv'\r\n          ];\r\n          break;\r\n        case 'durie-salmon staging system':\r\n          codeList = [\r\n            'stage 1',\r\n            'stage 1a',\r\n            'stage 1b',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib'\r\n          ];\r\n          break;\r\n        case 'figo staging system':\r\n          codeList = [\r\n            'stage ia',\r\n            'stage ia1',\r\n            'stage ia2',\r\n            'stage ib',\r\n            'stage ib1',\r\n            'stage ib2',\r\n            'stage iia',\r\n            'stage iab',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iva',\r\n            'stage ivb'\r\n          ];\r\n          break;\r\n        case 'binet staging system':\r\n          codeList = [\r\n             'stage a',\r\n             'stage b',\r\n             'stage c'\r\n         ];\r\n          break;\r\n        case 'ajcc 8th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\r\n          break;\r\n        case 'ajcc 7th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\r\n];\r\n          break;\r\n        default:\r\n          codelist = [];\r\n      }\r\n\r\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\r\n        const msg = `'${$field}' is not a permissible value. When 'clinical_tumour_staging_system' is set to '${\r\n          $row.clinical_tumour_staging_system\r\n        }', 'clinical_stage_group' must be one of the following: \\n${codeList\r\n          .map(code => `- \"${code}\"`)\r\n          .join('\\n')}`;\r\n\r\n        result.valid = false;\r\n        result.message = msg;\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            },
            "required": { "left": null, "right": true }
          }
        },
        "performance_status": {
          "description": {
            "left": "Indicate the donor's performance status grade at the time of primary diagnosis. (Reference: ECOG performance score grades from https://ecog-acrin.org/resources/ecog-performance-status).",
            "right": "Indicate the donor's performance status grade at the time of primary diagnosis. (Reference source: ECOG performance score grades from https://ecog-acrin.org/resources/ecog-performance-status)."
          }
        }
      },
      "created": {},
      "deleted": {
        "lymph_nodes_examined_status": {
          "changeType": "deleted",
          "name": "lymph_nodes_examined_status",
          "description": "Indicate if lymph nodes were examined for metastases.",
          "valueType": "string",
          "restrictions": {
            "required": true,
            "codeList": [
              "Cannot be determined",
              "No",
              "No lymph nodes found in resected specimen",
              "Not applicable",
              "Yes"
            ]
          },
          "meta": { "core": true, "displayName": "Lymph Nodes Examined Status" }
        }
      }
    },
    "treatment": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_treatment_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_primary_diagnosis_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "is_primary_treatment": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "required": { "left": null, "right": true }
          }
        },
        "line_of_treatment": {
          "meta": { "dependsOn": { "left": "treatment.is_primary_treatment", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n\n      /* checks for a string just consisting of whitespace */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n     \n      if (($field != null && (!(checkforEmpty($field)))) && ($row.is_primary_treatment != null && !(checkforEmpty($row.is_primary_treatment)))) {\n         const isPrimaryTreatment = $row.is_primary_treatment.trim().toLowerCase();\n         /* if treatment is the primary treatment, then line_of_treatment should not be submitted. */\n         if (isPrimaryTreatment === 'yes') {\n            result = { valid: false, message: `The '${$name}' field should not be submitted if this treatment is the primary treatment.`};\n         }\n         /* if treatment is not primary treatment, then line_of_treatment must be greater than 1 */\n         else if (isPrimaryTreatment === 'no' && parseInt($field) <= 1) {\n            result = { valid: false, message: `The '${$name}' field must be a value greater than 1`};\n         }\n         /* if it is unknown whether treatment was primary treatment, then line_of_treatment should not be submitted. If it is, then primary_treatment should be 'no' */\n         else if (isPrimaryTreatment === 'unknown') {\n            result = { valid: false, message: `The '${$name}' field should not be submitted if 'is_primary_treatment' is 'unknown'.`};\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            }
          }
        },
        "treatment_start_interval": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "range": { "left": { "exclusiveMin": 0 }, "right": null },
            "required": { "left": null, "right": true }
          }
        },
        "treatment_duration": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "range": { "left": { "exclusiveMin": 0 }, "right": null },
            "required": { "left": null, "right": true }
          }
        },
        "days_per_cycle": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "range": { "left": { "exclusiveMin": 0 }, "right": null }
          }
        },
        "number_of_cycles": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "range": { "left": { "exclusiveMin": 0 }, "right": null }
          }
        },
        "treatment_intent": {
          "description": {
            "left": "Indicate the intended disease outcome for which the treatment is given. (Reference: NCIt C124307)",
            "right": "Indicate the intended disease outcome for which the treatment is given. (Reference: CDISC [NCIt code: C124307])"
          },
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "required": { "left": null, "right": true }
          }
        },
        "treatment_setting": {
          "description": {
            "left": "Indicate the treatment setting, which describes the treatment's purpose in relation to the primary treatment. (Reference: NCIt C124308)",
            "right": "Indicate the treatment setting, which describes the treatment's purpose in relation to the primary treatment. (Reference: CDISC [NCIt code: C124308])"
          },
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "required": { "left": null, "right": true }
          }
        },
        "response_to_treatment": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            },
            "required": { "left": null, "right": true }
          }
        },
        "outcome_of_treatment": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            }
          }
        },
        "toxicity_type": {
          "description": {
            "left": "If the treatment was terminated early due to acute toxicity, indicate whether it was due to hematological toxicity or non-hematological toxicity.",
            "right": "If the treatment was terminated early due to acute toxicity, indicate whether it was due to hemotological toxicity or non-hemotological toxicity."
          },
          "meta": { "dependsOn": { "left": "treatment.outcome_of_treatment", "right": null } },
          "restrictions": {
            "codeList": {
              "left": ["Hematological", "Non-hematological"],
              "right": ["Hemotological", "Non-hemotological"],
              "data": {
                "added": ["Hemotological", "Non-hemotological"],
                "deleted": ["Hematological", "Non-hematological"]
              }
            },
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      \n      /* checks for a string just consisting of whitespace */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n      \n      if ($field != null && !(checkforEmpty($field))) {\n         if (($row.outcome_of_treatment != null && !(checkforEmpty($row.outcome_of_treatment)))) { \n            const outcomeOfTreatment = $row.outcome_of_treatment.trim().toLowerCase();\n     \n            /* toxicityType should only be submitted if treatment was terminated early due to acute toxicity ('outcome_of_treatment' is 'Treatment stopped due to acute toxicity'). */\n            if (outcomeOfTreatment != \"treatment stopped due to acute toxicity\") {\n               result = { valid: false, message: `The 'outcome_of_treatment' field should be 'Treatment stopped due to acute toxicity' if the '${$name}' field is submitted.`};\n            }\n         }\n         else {\n            result = {valid: false, message: `If the 'toxicity_type' field is submitted, then the 'outcome_of_treatment' field must be submitted as well.`}\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            }
          }
        },
        "adverse_events": {
          "meta": { "dependsOn": { "left": "treatment.treatment_type", "right": null } },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      const coreFields = ['is_primary_treatment', 'treatment_start_interval', 'treatment_duration', 'treatment_intent', 'treatment_setting', 'response_to_treatment'];\n \n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n      if ($row.treatment_type != null) {\n         const treatmentType = $row.treatment_type;\n         if (!(treatmentType.includes(\"No treatment\"))) {\n            if (coreFields.includes($name)) {\n               if (!$field || checkforEmpty($field)) {\n                  result = {\n                     valid: false,\n                     message: `The '${$name}' field must be submitted when 'treatment_type' is '${treatmentType}'`,\n                  };\n               }\n            }\n         }\n         else if (treatmentType.includes(\"No treatment\") && ($field)) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if 'treatment_type' is set to '${treatmentType}'`,\n            };\n         }\n      }\n      return result;\n  })"
              ],
              "right": null
            }
          }
        },
        "clinical_trial_number": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      // checks for a string just consisting of whitespace\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n      \n      //regex check for clinical trial number\n      const NCTCheck = (entry) => {return /(^([Nn][Cc][Tt])[0-9]{8})/.test(decodeURI(entry))};\n      const EudraCTCheck = (entry) => {return /(^[2][0-9]{3}-[0-9]{6}-[0-9]{2})/.test(decodeURI(entry))};\n\n      // list of valid clinical trial databases\n      const clinical_dbs = [\"nci clinical trials\", \"eu clinical trials register\"];\n      \n      if ($row.clinical_trials_database && $field) {\n          const trialNumber = $field.trim();\n          const clinicalTrialsDB = $row.clinical_trials_database.trim().toLowerCase();\n          if ((clinicalTrialsDB === \"nci clinical trials\") && (!NCTCheck(trialNumber))) {\n            result = {valid: false, message: `The submitted NCI clinical trial number is in incorrect format.`};\n          }\n          else if ((clinicalTrialsDB === \"eu clinical trials register\") && (!EudraCTCheck(trialNumber))) {\n            result = {valid: false, message: `The submitted EudraCT clinical trial number is in incorrect format.`};\n          }\n          else if (!clinical_dbs.includes(clinicalTrialsDB)) {\n            result = {valid: false, message: `The submitted clinical trials database '${$row.clinical_trials_database}' is not included in the list of clinical trial database.`};\n          }\n      }\n      else if ((!$row.clinical_trials_database || checkforEmpty($row.clnical_trials_database)) && (!$field || checkforEmpty($field))) {\n          result = {valid: true, message: \"Ok\"};\n      }\n      else if ($row.clinical_trials_database && !$field) {\n          if (clinical_dbs.includes($row.clinical_trials_database.trim().toLowerCase())) {\n            result = {valid: false, message: `'${$name}' must be provided if 'clinical_trial_database' is set to '${$row.clinical_trials_database}'.`};\n          } \n      }\n      else if ((!$row.clinical_trials_database || checkforEmpty($row.clnical_trials_database)) && $field) {\n         result = { valid: false, message: `The 'clinical_trial_database' field must be submitted if '${$name}' is submitted.`};\n      }\n      return result;\n    })"
              ],
              "right": [
                "(function validate(inputs) {\r\n      const {$row, $name, $field} = inputs;\r\n      let result = {valid: true, message: \"Ok\"};\r\n      // checks for a string just consisting of whitespace\r\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\r\n      \r\n      //regex check for clinical trial number\r\n      const NCTCheck = (entry) => {return /(^([Nn][Cc][Tt])[0-9]{8})/.test(decodeURI(entry))};\r\n      const EudraCTCheck = (entry) => {return /(^[2][0-9]{3}-[0-9]{6}-[0-9]{2})/.test(decodeURI(entry))};\r\n\r\n      // list of valid clinical trial databases\r\n      const clinical_dbs = [\"nci clinical trials\", \"eu clinical trials register\"];\r\n      \r\n      if ($row.clinical_trials_database && $field) {\r\n          const trialNumber = $field.trim();\r\n          const clinicalTrialsDB = $row.clinical_trials_database.trim().toLowerCase();\r\n          if ((clinicalTrialsDB === \"nci clinical trials\") && (!NCTCheck(trialNumber))) {\r\n            result = {valid: false, message: 'The submitted NCI clinical trial number is in incorrect format.'};\r\n          }\r\n          else if ((clinicalTrialsDB === \"eu clinical trials register\") && (!EudraCTCheck(trialNumber))) {\r\n            result = {valid: false, message: \"The submitted EudraCT clinical trial number is in incorrect format.\"};\r\n          }\r\n          else if (!clinical_dbs.includes(clinicalTrialsDB)) {\r\n            result = {valid: false, message: \"The submitted clinical trials database '${$row.clinical_trials_database}' is not included in the list of clinical trial database.\"};\r\n          }\r\n      }\r\n      else if ((!$row.clinical_trials_database || checkforEmpty($row.clnical_trials_database)) && (!$field || checkforEmpty($field))) {\r\n          result = {valid: true, message: \"Ok\"};\r\n      }\r\n      else if ($row.clinical_trials_database && !$field) {\r\n          if (clinical_dbs.includes($row.clinical_trials_database.trim().toLowerCase())) {\r\n            result = {valid: false, message: \"'${$name}' must be provided if 'clinical_trial_database' is set to '${$row.clinical_trials_database}'.\"};\r\n          } \r\n      }\r\n      return result;\r\n    })"
              ]
            }
          }
        }
      },
      "created": {
        "age_at_consent_for_treatment": {
          "changeType": "created",
          "name": "age_at_consent_for_treatment",
          "description": "Indicate the age of donor when consent was given for treatment.",
          "valueType": "integer",
          "meta": { "displayName": "Age At Consent For Treatment" }
        },
        "hemotological_toxicity": {
          "changeType": "created",
          "name": "hemotological_toxicity",
          "description": "Indicate the hemotological toxicities which caused early termination of the treatment. (Codelist reference: NCI-CTCAE (v5.0))",
          "valueType": "string",
          "isArray": true,
          "restrictions": {
            "codeList": [
              "Anemia - Grade 3",
              "Anemia - Grade 4",
              "Anemia - Grade 5",
              "Neutropenia - Grade 3",
              "Neutropenia - Grade 4",
              "Neutropenia - Grade 5",
              "Thrombocytopenia - Grade 3",
              "Thrombocytopenia - Grade 4",
              "Thrombocytopenia - Grade 5"
            ]
          },
          "meta": {
            "displayName": "Hemotological Toxicity",
            "notes": "To include multiple values, separate values with a pipe delimiter '|' within your file."
          }
        }
      },
      "deleted": {
        "hematological_toxicity": {
          "changeType": "deleted",
          "name": "hematological_toxicity",
          "description": "Indicate the hematological toxicities which caused early termination of the treatment. (Codelist reference: NCI-CTCAE (v5.0))",
          "valueType": "string",
          "isArray": true,
          "restrictions": {
            "codeList": [
              "Anemia - Grade 3",
              "Anemia - Grade 4",
              "Anemia - Grade 5",
              "Neutropenia - Grade 3",
              "Neutropenia - Grade 4",
              "Neutropenia - Grade 5",
              "Thrombocytopenia - Grade 3",
              "Thrombocytopenia - Grade 4",
              "Thrombocytopenia - Grade 5"
            ],
            "script": [
              "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      \n      /* checks for a string just consisting of whitespace */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n      \n      if ($field != null && !(checkforEmpty($field))) {\n         if (($row.toxicity_type != null && !(checkforEmpty($row.toxicity_type)))) { \n            const toxicityType = $row.toxicity_type.trim().toLowerCase();\n     \n            /* if toxicity_type is non-hematological, then hematological_toxicity should not be submitted. If toxicity_type is hematological, then 'non-hematological_toxicity' should not be submitted */\n            if (toxicityType === 'non-hematological' && $name === 'hematological_toxicity') {\n               result = { valid: false, message: `The '${$name}' field should not be submitted if 'toxicity_type' is '${toxicityType}'.`};\n            }\n            else if (toxicityType === 'hematological' && $name === 'non-hematological_toxicity') {\n               result = { valid: false, message: `The '${$name}' field should not be submitted if 'toxicity_type' is '${toxicityType}'.`};\n            }\n         }\n         else {\n            result = {valid: false, message: `The 'toxicity_type' field should be submitted if '${$name}' field is submitted.`};\n         }\n      }\n      return result;\n  })"
            ]
          },
          "meta": {
            "displayName": "Hemotological Toxicity",
            "dependsOn": "treatment.toxicity_type",
            "notes": "To include multiple values, separate values with a pipe delimiter '|' within your file."
          }
        },
        "non-hematological_toxicity": {
          "changeType": "deleted",
          "name": "non-hematological_toxicity",
          "description": "Indicate the non-hematological toxicities which caused early termination of the treatment. (Codelist reference: NCI-CTCAE (v5.0))",
          "valueType": "string",
          "isArray": true,
          "restrictions": {
            "codeList": [
              "Cardiac disorders - Grade 1",
              "Cardiac disorders - Grade 2",
              "Cardiac disorders - Grade 3",
              "Cardiac disorders - Grade 4",
              "Cardiac disorders - Grade 5",
              "Dehydration - Grade 1",
              "Dehydration - Grade 2",
              "Dehydration - Grade 3",
              "Dehydration - Grade 4",
              "Dehydration - Grade 5",
              "Diarrhea - Grade 1",
              "Diarrhea - Grade 2",
              "Diarrhea - Grade 3",
              "Diarrhea - Grade 4",
              "Diarrhea - Grade 5",
              "Fatigue - Grade 1",
              "Fatigue - Grade 2",
              "Fatigue - Grade 3",
              "Nausea - Grade 1",
              "Nausea - Grade 2",
              "Nausea - Grade 3",
              "Vomiting - Grade 1",
              "Vomiting - Grade 2",
              "Vomiting - Grade 3",
              "Vomiting - Grade 4",
              "Vomiting - Grade 5",
              "Weight loss - Grade 1",
              "Weight loss - Grade 2",
              "Weight loss - Grade 3"
            ],
            "script": [
              "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      \n      /* checks for a string just consisting of whitespace */\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n      \n      if ($field != null && !(checkforEmpty($field))) {\n         if (($row.toxicity_type != null && !(checkforEmpty($row.toxicity_type)))) { \n            const toxicityType = $row.toxicity_type.trim().toLowerCase();\n     \n            /* if toxicity_type is non-hematological, then hematological_toxicity should not be submitted. If toxicity_type is hematological, then 'non-hematological_toxicity' should not be submitted */\n            if (toxicityType === 'non-hematological' && $name === 'hematological_toxicity') {\n               result = { valid: false, message: `The '${$name}' field should not be submitted if 'toxicity_type' is '${toxicityType}'.`};\n            }\n            else if (toxicityType === 'hematological' && $name === 'non-hematological_toxicity') {\n               result = { valid: false, message: `The '${$name}' field should not be submitted if 'toxicity_type' is '${toxicityType}'.`};\n            }\n         }\n         else {\n            result = {valid: false, message: `The 'toxicity_type' field should be submitted if '${$name}' field is submitted.`};\n         }\n      }\n      return result;\n  })"
            ]
          },
          "meta": {
            "displayName": "Non-hematological Toxicity",
            "dependsOn": "treatment.toxicity_type",
            "notes": "To include multiple values, separate values with a pipe delimiter '|' within your file."
          }
        }
      }
    },
    "chemotherapy": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_treatment_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "drug_name": {
          "description": {
            "left": "Name of agent or drug administered to donor as part of the treatment regimen.",
            "right": "Name of agent or drug administered to patient as part of the treatment regimen."
          }
        },
        "cumulative_drug_dosage": {
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        }
      },
      "created": {},
      "deleted": {}
    },
    "hormone_therapy": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_treatment_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "drug_name": {
          "description": {
            "left": "Name of agent or drug administered to donor as part of the treatment regimen.",
            "right": "Name of agent or drug administered to patient as part of the treatment regimen."
          }
        },
        "cumulative_drug_dosage": {
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        }
      },
      "created": {},
      "deleted": {}
    },
    "radiation": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_treatment_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "radiation_therapy_fractions": {
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        },
        "radiation_therapy_dosage": {
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        }
      },
      "created": {},
      "deleted": {}
    },
    "immunotherapy": {
      "updated": {},
      "created": {},
      "deleted": {
        "program_id": {
          "changeType": "deleted",
          "name": "program_id",
          "valueType": "string",
          "description": "Unique identifier of the ARGO program.",
          "meta": {
            "validationDependency": true,
            "primaryId": true,
            "foreignKey": "sample_registration.program_id",
            "displayName": "Program ID"
          },
          "restrictions": { "required": true }
        },
        "submitter_donor_id": {
          "changeType": "deleted",
          "name": "submitter_donor_id",
          "valueType": "string",
          "description": "Unique identifier of the donor, assigned by the data provider.",
          "meta": {
            "validationDependency": true,
            "primaryId": true,
            "foreignKey": "sample_registration.submitter_donor_id",
            "displayName": "Submitter Donor ID"
          },
          "restrictions": { "required": true, "regex": "^[A-Za-z0-9\\-\\._]{1,64}" }
        },
        "submitter_treatment_id": {
          "changeType": "deleted",
          "name": "submitter_treatment_id",
          "valueType": "string",
          "description": "Unique identifier of the treatment, assigned by the data provider.",
          "meta": {
            "validationDependency": true,
            "primaryId": true,
            "foreignKey": "treatment.submitter_treatment_id",
            "displayName": "Submitter Treatment ID"
          },
          "restrictions": { "required": true, "regex": "^[A-Za-z0-9\\-\\._]{1,64}" }
        },
        "immunotherapy_type": {
          "changeType": "deleted",
          "name": "immunotherapy_type",
          "valueType": "string",
          "description": "Indicate the type of immunotherapy administered to donor.",
          "meta": { "displayName": "Immunotherapy Type" },
          "restrictions": {
            "codeList": [
              "Cell-based",
              "Immune checkpoint inhibitors",
              "Monoclonal antibodies other than immune checkpoint inhibitors",
              "Other immunomodulatory substances"
            ]
          }
        },
        "drug_rxnormcui": {
          "changeType": "deleted",
          "name": "drug_rxnormcui",
          "description": "The unique RxNormID assigned to the treatment regimen drug.",
          "valueType": "string",
          "meta": {
            "validationDependency": true,
            "core": true,
            "notes": "This field uses standardized vocabulary from the RxNorm database (https://www.nlm.nih.gov/research/umls/rxnorm), provided by the NIH.\n\nYou can search for RX Norm values through the web interface (https://mor.nlm.nih.gov/RxNav/) or API (https://mor.nlm.nih.gov/download/rxnav/RxNormAPIs.html).\n\nFor example, to find the rxnormcui based on drug name, you can use: https://rxnav.nlm.nih.gov/REST/rxcui.json?name=leucovorin or https://mor.nlm.nih.gov/RxNav/search?searchBy=String&searchTerm=leucovorin",
            "displayName": "RxNormCUI"
          },
          "restrictions": { "required": true }
        },
        "drug_name": {
          "changeType": "deleted",
          "name": "drug_name",
          "description": "Name of agent or drug administered to donor as part of the treatment regimen.",
          "valueType": "string",
          "meta": {
            "validationDependency": true,
            "core": true,
            "notes": "This field uses standardized vocabulary from the RxNorm database (https://www.nlm.nih.gov/research/umls/rxnorm), provided by the NIH.\n\nYou can search for RX Norm values through the web interface (https://mor.nlm.nih.gov/RxNav/) or API (https://mor.nlm.nih.gov/download/rxnav/RxNormAPIs.html).\n\nFor example, to find the rxnormcui based on drug name, you can use: https://rxnav.nlm.nih.gov/REST/rxcui.json?name=leucovorin or https://mor.nlm.nih.gov/RxNav/search?searchBy=String&searchTerm=leucovorin",
            "displayName": "Immunotherapy Drug Name"
          },
          "restrictions": { "required": true }
        }
      }
    },
    "follow_up": {
      "updated": {
        "submitter_donor_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_follow_up_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "interval_of_followup": {
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        },
        "submitter_primary_diagnosis_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "submitter_treatment_id": {
          "meta": {
            "notes": {
              "left": null,
              "right": "To prevent data collisions, submitter_id cannot begin with any of the ARGO ID prefixes.  The restricted prefixes include: `DO`, `SP`, `SA`,`TR`,`FU`, `PD`."
            }
          }
        },
        "weight_at_followup": {
          "valueType": { "left": "number", "right": "integer" },
          "restrictions": { "range": { "left": { "exclusiveMin": 0 }, "right": null } }
        },
        "relapse_type": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n        let result = {valid: true, message: \"Ok\"};\n        \n        /* required field, cannot be null */\n        if ($row.disease_status_at_followup != null) {\n           const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\n           const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \n           const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\n   \n           /* checks for a string just consisting of whitespace */\n           const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n           if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\n              result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\n           }\n           else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\n              result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\n           }\n        }\n        return  result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n      const {$row, $name, $field} = inputs;\r\n        let result = {valid: true, message: \"Ok\"};\r\n        \r\n        /* required field, cannot be null */\r\n        const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\r\n    \r\n        const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \r\n        const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\r\n   \r\n        // checks for a string just consisting of whitespace\r\n        const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\r\n\r\n\r\n        if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\r\n            result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\r\n        }\r\n        else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\r\n            result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\r\n        }\r\n        return  result;\r\n    })"
              ]
            }
          }
        },
        "relapse_interval": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n      \n      /* required field, cannot be null */\n      if ($row.disease_status_at_followup != null) {\n         const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\n         const intervalOfFollowup = parseInt($row.interval_of_followup);\n         const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \n         const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\n  \n         /* checks for a string just consisting of whitespace */\n         const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n         if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\n            result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\n         }\n         else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\n            result = {valid: false, message: `The '${$name}' field cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\n         }\n         else if (!(checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\n            relapseInterval = parseInt($field);\n            if (relapseInterval > intervalOfFollowup) {\n               result = {valid: false, message: `The '${$name}' field cannot be greater than the 'interval_of_followup'.` }\n            }\n         }\n      }\n      return  result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n      const {$row, $name, $field} = inputs;\r\n      let result = {valid: true, message: \"Ok\"};\r\n      \r\n      /* required field, cannot be null */\r\n      const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\r\n      const intervalOfFollowup = parseInt($row.interval_of_followup);\r\n\r\n      const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \r\n      const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\r\n  \r\n      // checks for a string just consisting of whitespace\r\n      const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\r\n\r\n\r\n      if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\r\n          result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\r\n      }\r\n      else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\r\n          result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\r\n      }\r\n      else if (!(checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\r\n          relapseInterval = parseInt($field);\r\n          if (relapseInterval > intervalOfFollowup) {\r\n              result = {valid: false, message: `'${$name}' cannot be greater than the 'interval_of_followup'.` }\r\n          }\r\n      }\r\n      return  result;\r\n    })"
              ]
            },
            "range": { "left": { "exclusiveMin": 0 }, "right": null }
          }
        },
        "method_of_progression_status": {
          "description": {
            "left": "Indicate the method(s) used to confirm the donor's progression or relapse or recurrence disease status. (Reference: caDSR CDE ID 6161031)",
            "right": "Indicate the method(s) used to confirm the donor's progression or relapse or recurrence disease status. (Codelist reference: NCI CDE ID: 6161031)"
          },
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n        let result = {valid: true, message: \"Ok\"};\n        \n        /* required field, cannot be null */\n        if ($row.disease_status_at_followup != null) {\n           const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\n           const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \n           const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\n   \n           /* checks for a string just consisting of whitespace */\n           const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n           if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\n              result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\n           }\n           else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\n              result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\n           }\n        }\n        return  result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n      const {$row, $name, $field} = inputs;\r\n        let result = {valid: true, message: \"Ok\"};\r\n        \r\n        /* required field, cannot be null */\r\n        const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\r\n    \r\n        const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \r\n        const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\r\n   \r\n        // checks for a string just consisting of whitespace\r\n        const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\r\n\r\n\r\n        if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\r\n            result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\r\n        }\r\n        else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\r\n            result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\r\n        }\r\n        return  result;\r\n    })"
              ]
            }
          }
        },
        "anatomic_site_progression_or_recurrences": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n        let result = {valid: true, message: \"Ok\"};\n        \n        /* required field, cannot be null */\n        if ($row.disease_status_at_followup != null) {\n           const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\n           const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \n           const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\n   \n           /* checks for a string just consisting of whitespace */\n           const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n           if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\n              result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\n           }\n           else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\n              result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\n           }\n        }\n        return  result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n      const {$row, $name, $field} = inputs;\r\n        let result = {valid: true, message: \"Ok\"};\r\n        \r\n        /* required field, cannot be null */\r\n        const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\r\n    \r\n        const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \r\n        const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\r\n   \r\n        // checks for a string just consisting of whitespace\r\n        const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\r\n\r\n\r\n        if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\r\n            result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\r\n        }\r\n        else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\r\n            result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\r\n        }\r\n        return  result;\r\n    })"
              ]
            }
          }
        },
        "recurrence_tumour_staging_system": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\n    const listFormatter = arr => `${arr.map(entry => `\"${entry}\"`).join(', ')}`;\n\n   \n   /* Contingent on the naming system for tumour staging systems to remain consistent */\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_tumour_staging_system')[0];\n    const requiredFields = [\n      `${stagingName}_m_category`,\n      `${stagingName}_n_category`,\n      `${stagingName}_t_category`,\n    ];\n    const convertedRow = Object.fromEntries(\n      Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\n    );\n    /* Check for contigous spaces wrapped with quotes (empty strings) */\n    const checkforEmpty = entry => {\n      return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n    };\n\n    /* search for fields with falsy values*/\n    const emptyFields = requiredFields.filter(\n      field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\n    );\n\n    /* The staging system should be set to an AJCC option if the TNM fields are submitted */\n    if (!($field) && emptyFields.length != requiredFields.length) {\n       const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n       result = {\n         valid: false,\n         message:`The ${stagingName}_tumour_staging_system field must be set to an AJCC option when the following fields are submitted: ${listFormatter(\n            errorFields,\n          )}`,\n       };\n    }\n    /* This is not a required field, so first ensure that it exists */\n    else if ($field) {\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\n        result = {\n          valid: false,\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\n            emptyFields,\n          )}`,\n        };\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n        result = {\n          valid: false,\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\n            errorFields,\n          )}`,\n        };\n      }\n    }\n    return result;\n  })",
                "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n        let result = {valid: true, message: \"Ok\"};\n        \n        /* required field, cannot be null */\n        if ($row.disease_status_at_followup != null) {\n           const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\n           const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \n           const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\n   \n           /* checks for a string just consisting of whitespace */\n           const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n\n           if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\n              result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\n           }\n           else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\n              result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\n           }\n        }\n        return  result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\r\n    /* This is not a required field, so first ensure that it exists */\r\n    if ($field) {\r\n      /* Contingent on the naming system for tumour staging systems to remain consistent */\r\n      const stagingName = $name\r\n        .trim()\r\n        .toLowerCase()\r\n        .split('_tumour_staging_system')[0];\r\n      const requiredFields = [\r\n        `${stagingName}_m_category`,\r\n        `${stagingName}_n_category`,\r\n        `${stagingName}_t_category`,\r\n      ];\r\n      const convertedRow = Object.fromEntries(\r\n        Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\r\n      );\r\n      /* Check for contigous spaces wrapped with quotes (empty strings) */\r\n      const checkforEmpty = entry => {\r\n        return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\r\n      };\r\n\r\n      /* search for fields with falsy values*/\r\n      const emptyFields = requiredFields.filter(\r\n        field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\r\n      );\r\n\r\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\r\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\r\n            emptyFields,\r\n          )}`,\r\n        };\r\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\r\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\r\n            errorFields,\r\n          )}`,\r\n        };\r\n      }\r\n    }\r\n    return result;\r\n  })",
                "(function validate(inputs) {\r\n      const {$row, $name, $field} = inputs;\r\n        let result = {valid: true, message: \"Ok\"};\r\n        \r\n        /* required field, cannot be null */\r\n        const diseaseStatus = $row.disease_status_at_followup.trim().toLowerCase();\r\n    \r\n        const stateOfProgression = (entry) => {return /(progression)$/.test(decodeURI(entry))}; \r\n        const relapseOrRecurrence = diseaseStatus === \"relapse or recurrence\";\r\n   \r\n        // checks for a string just consisting of whitespace\r\n        const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\r\n\r\n\r\n        if ((!$field || checkforEmpty($field)) && (stateOfProgression(diseaseStatus) || relapseOrRecurrence)) {\r\n            result = {valid: false, message: `'${$name}' is a required field if 'disease_status_at_followup' is set a state of progression, relapse, or recurrence.` }\r\n        }\r\n        else if (!(!$field || checkforEmpty($field)) && !stateOfProgression(diseaseStatus) && !relapseOrRecurrence) {\r\n            result = {valid: false, message: `'${$name}' cannot be provided if 'disease_status_at_followup' is not a state of progression, relapse, or recurrence.` }\r\n        }\r\n        return  result;\r\n    })"
              ]
            }
          }
        },
        "recurrence_stage_group": {
          "restrictions": {
            "codeList": {
              "left": [
                "Occult Carcinoma",
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage A",
                "Stage B",
                "Stage C",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IAB",
                "Stage IAE",
                "Stage IAES",
                "Stage IAS",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IBE",
                "Stage IBES",
                "Stage IBS",
                "Stage IC",
                "Stage IE",
                "Stage IEA",
                "Stage IEB",
                "Stage IES",
                "Stage II",
                "Stage II bulky",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIAE",
                "Stage IIAES",
                "Stage IIAS",
                "Stage IIB",
                "Stage IIBE",
                "Stage IIBES",
                "Stage IIBS",
                "Stage IIC",
                "Stage IIE",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIAE",
                "Stage IIIAES",
                "Stage IIIAS",
                "Stage IIIB",
                "Stage IIIBE",
                "Stage IIIBES",
                "Stage IIIBS",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IIIE",
                "Stage IIIES",
                "Stage IIIS",
                "Stage IIS",
                "Stage IS",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVAE",
                "Stage IVAES",
                "Stage IVAS",
                "Stage IVB",
                "Stage IVBE",
                "Stage IVBES",
                "Stage IVBS",
                "Stage IVC",
                "Stage IVE",
                "Stage IVES",
                "Stage IVS"
              ],
              "right": [
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IC",
                "Stage IS",
                "Stage IE",
                "Stage II",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIE",
                "Stage IIB",
                "Stage IIC",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIB",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVB",
                "Stage IVC",
                "Occult carcinoma",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage ISA",
                "Stage ISB",
                "Stage IEA",
                "Stage IEB",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage IIESA",
                "Stage IIESB",
                "Stage IIS",
                "Stage IISA",
                "Stage IISB",
                "Stage IIIE",
                "Stage IIIEA",
                "Stage IIIEB",
                "Stage IIIES",
                "Stage IIIESA",
                "Stage IIIESB",
                "Stage IIIS",
                "Stage IIISA",
                "Stage IIISB",
                "Stage IAB",
                "Stage A",
                "Stage B",
                "Stage C"
              ],
              "data": {
                "added": [
                  "Occult carcinoma",
                  "Stage ISA",
                  "Stage ISB",
                  "Stage IIESA",
                  "Stage IIESB",
                  "Stage IISA",
                  "Stage IISB",
                  "Stage IIIEA",
                  "Stage IIIEB",
                  "Stage IIIESA",
                  "Stage IIIESB",
                  "Stage IIISA",
                  "Stage IIISB"
                ],
                "deleted": [
                  "Occult Carcinoma",
                  "Stage IAE",
                  "Stage IAES",
                  "Stage IAS",
                  "Stage IBE",
                  "Stage IBES",
                  "Stage IBS",
                  "Stage IES",
                  "Stage II bulky",
                  "Stage IIAE",
                  "Stage IIAES",
                  "Stage IIAS",
                  "Stage IIBE",
                  "Stage IIBES",
                  "Stage IIBS",
                  "Stage IIIAE",
                  "Stage IIIAES",
                  "Stage IIIAS",
                  "Stage IIIBE",
                  "Stage IIIBES",
                  "Stage IIIBS",
                  "Stage IVAE",
                  "Stage IVAES",
                  "Stage IVAS",
                  "Stage IVBE",
                  "Stage IVBES",
                  "Stage IVBS",
                  "Stage IVE",
                  "Stage IVES",
                  "Stage IVS"
                ]
              }
            },
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_stage_group')[0];\n\n    const stagingSystem = stagingName + `_tumour_staging_system`;\n    \n    /* checks for a string just consisting of whitespace */\n    const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n \n    if ($row[stagingSystem] && (!$field || checkforEmpty($field))) {\n      result.valid = false;\n      const msg = `The ${stagingName}_stage_group must be submitted if the field ${stagingSystem} is submitted.`;\n      result.message = msg;\n    }\n    else if (!($row[stagingSystem]) && $field) {\n       result.valid = false;\n       const msg = `The field ${stagingSystem} must be submitted if ${stagingName}_stage_group is submitted.`;\n       result.message = msg;\n    }\n    else if ($row[stagingSystem] && $field) {\n      let codeList = [];\n      switch ($row[stagingSystem] && $row[stagingSystem].trim().toLowerCase()) {\n        case 'revised international staging system (riss)':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii'\n          ];\n          break;\n        case 'lugano staging system':\n          codeList = [\n             'stage i',\n             'stage ia',\n             'stage ib',\n             'stage ie',\n             'stage iea',\n             'stage ieb',\n             'stage ii',\n             'stage ii bulky',\n             'stage iia',\n             'stage iib',\n             'stage iie',\n             'stage iiea',\n             'stage iieb',\n             'stage iii',\n             'stage iiia',\n             'stage iiib',\n             'stage iv',\n             'stage iva',\n             'stage ivb'\n          ];\n          break;\n        case 'st jude staging system':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii',\n            'stage iv'\n          ];\n          break;\n        case 'ann arbor staging system':\n          codeList = [\n            'stage i',\n            'stage ia',\n            'stage ie',\n            'stage is',\n            'stage ies',\n            'stage iae',\n            'stage ias',\n            'stage iaes',\n            'stage ib',\n            'stage ibe',\n            'stage ibs',\n            'stage ibes',\n            'stage ii',\n            'stage iia',\n            'stage iie',\n            'stage iis',\n            'stage iies',\n            'stage iiae',\n            'stage iias',\n            'stage iiaes',\n            'stage iib',\n            'stage iibe',\n            'stage iibs',\n            'stage iibes',\n            'stage iii',\n            'stage iiia',\n            'stage iiie',\n            'stage iiis',\n            'stage iiies',\n            'stage iiiae',\n            'stage iiias',\n            'stage iiiaes',\n            'stage iiib',\n            'stage iiibe',\n            'stage iiibs',\n            'stage iiibes',\n            'stage iv',\n            'stage iva',\n            'stage ive',\n            'stage ivs',\n            'stage ives',\n            'stage ivae',\n            'stage ivas',\n            'stage ivaes',\n            'stage ivb',\n            'stage ivbe',\n            'stage ivbs',\n            'stage ivbes'\n          ];\n          break;\n        case 'rai staging system':\n          codeList = [\n             'stage 0',\n             'stage i',\n             'stage ii',\n             'stage iii',\n             'stage iv'\n          ];\n          break;\n        case 'durie-salmon staging system':\n          codeList = [\n            'stage 1',\n            'stage 1a',\n            'stage 1b',\n            'stage ii',\n            'stage iia',\n            'stage iib',\n            'stage iii',\n            'stage iiia',\n            'stage iiib'\n          ];\n          break;\n        case 'figo staging system':\n          codeList = [\n            'stage ia',\n            'stage ia1',\n            'stage ia2',\n            'stage ib',\n            'stage ib1',\n            'stage ib2',\n            'stage iia',\n            'stage iab',\n            'stage iiia',\n            'stage iiib',\n            'stage iva',\n            'stage ivb'\n          ];\n          break;\n        case 'binet staging system':\n          codeList = [\n             'stage a',\n             'stage b',\n             'stage c'\n         ];\n          break;\n        case 'ajcc 8th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\n          break;\n        case 'ajcc 7th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\n];\n          break;\n        default:\n          codelist = [];\n      }\n\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\n        const msg = `'${$field}' is not a permissible value. When '${stagingSystem}' is set to '${\n          $row[stagingSystem]\n        }', '${stagingName}_stage_group' must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n\n        result.valid = false;\n        result.message = msg;\n      }\n    }\n    \n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    if ($row.recurrence_tumour_staging_system && $field) {\r\n      let codeList = [];\r\n      switch ($row.recurrence_tumour_staging_system && $row.recurrence_tumour_staging_system.trim().toLowerCase()) {\r\n        case 'revised international staging system (riss)':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii'\r\n          ];\r\n          break;\r\n        case 'lugano staging system':\r\n          codeList = [\r\n             'stage i',\r\n             'stage ia',\r\n             'stage ib',\r\n             'stage ie',\r\n             'stage iea',\r\n             'stage ieb',\r\n             'stage ii',\r\n             'stage iia',\r\n             'stage iib',\r\n             'stage iie',\r\n             'stage iiea',\r\n             'stage iieb',\r\n             'stage iii',\r\n             'stage iiia',\r\n             'stage iiib',\r\n             'stage iv',\r\n             'stage iva',\r\n             'stage ivb'\r\n          ];\r\n          break;\r\n        case 'st jude staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii',\r\n            'stage iv'\r\n          ];\r\n          break;\r\n        case 'ann arbor staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ia',\r\n            'stage ib',\r\n            'stage ie',\r\n            'stage is',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iie',\r\n            'stage iis',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iiie',\r\n            'stage iiis',\r\n            'stage iv',\r\n            'stage iva',\r\n            'stage ivb',\r\n            'stage ive',\r\n            'stage ivs'\r\n          ];\r\n          break;\r\n        case 'rai staging system':\r\n          codeList = [\r\n             'stage 0',\r\n             'stage i',\r\n             'stage ii',\r\n             'stage iii',\r\n             'stage iv'\r\n          ];\r\n          break;\r\n        case 'durie-salmon staging system':\r\n          codeList = [\r\n            'stage 1',\r\n            'stage 1a',\r\n            'stage 1b',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib'\r\n          ];\r\n          break;\r\n        case 'figo staging system':\r\n          codeList = [\r\n            'stage ia',\r\n            'stage ia1',\r\n            'stage ia2',\r\n            'stage ib',\r\n            'stage ib1',\r\n            'stage ib2',\r\n            'stage iia',\r\n            'stage iab',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iva',\r\n            'stage ivb'\r\n          ];\r\n          break;\r\n        case 'binet staging system':\r\n          codeList = [\r\n             'stage a',\r\n             'stage b',\r\n             'stage c'\r\n         ];\r\n          break;\r\n        case 'ajcc 8th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\r\n          break;\r\n        case 'ajcc 7th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\r\n];\r\n          break;\r\n        default:\r\n          codelist = [];\r\n      }\r\n\r\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\r\n        const msg = `'${$field}' is not a permissible value. When 'recurrence_tumour_staging_system' is set to '${\r\n          $row.recurrence_tumour_staging_system\r\n        }', 'recurrence_stage_group' must be one of the following: \\n${codeList\r\n          .map(code => `- \"${code}\"`)\r\n          .join('\\n')}`;\r\n\r\n        result.valid = false;\r\n        result.message = msg;\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            }
          }
        },
        "posttherapy_tumour_staging_system": {
          "restrictions": {
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\n    const listFormatter = arr => `${arr.map(entry => `\"${entry}\"`).join(', ')}`;\n\n   \n   /* Contingent on the naming system for tumour staging systems to remain consistent */\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_tumour_staging_system')[0];\n    const requiredFields = [\n      `${stagingName}_m_category`,\n      `${stagingName}_n_category`,\n      `${stagingName}_t_category`,\n    ];\n    const convertedRow = Object.fromEntries(\n      Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\n    );\n    /* Check for contigous spaces wrapped with quotes (empty strings) */\n    const checkforEmpty = entry => {\n      return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\n    };\n\n    /* search for fields with falsy values*/\n    const emptyFields = requiredFields.filter(\n      field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\n    );\n\n    /* The staging system should be set to an AJCC option if the TNM fields are submitted */\n    if (!($field) && emptyFields.length != requiredFields.length) {\n       const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n       result = {\n         valid: false,\n         message:`The ${stagingName}_tumour_staging_system field must be set to an AJCC option when the following fields are submitted: ${listFormatter(\n            errorFields,\n          )}`,\n       };\n    }\n    /* This is not a required field, so first ensure that it exists */\n    else if ($field) {\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\n        result = {\n          valid: false,\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\n            emptyFields,\n          )}`,\n        };\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\n        result = {\n          valid: false,\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\n            errorFields,\n          )}`,\n        };\n      }\n    }\n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $name, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    const arrayFormatter = arr => `\\n${arr.map(entry => `- \"${entry}\"`).join('\\n')}`;\r\n    /* This is not a required field, so first ensure that it exists */\r\n    if ($field) {\r\n      /* Contingent on the naming system for tumour staging systems to remain consistent */\r\n      const stagingName = $name\r\n        .trim()\r\n        .toLowerCase()\r\n        .split('_tumour_staging_system')[0];\r\n      const requiredFields = [\r\n        `${stagingName}_m_category`,\r\n        `${stagingName}_n_category`,\r\n        `${stagingName}_t_category`,\r\n      ];\r\n      const convertedRow = Object.fromEntries(\r\n        Object.entries($row).map(([fieldName, fieldVal]) => [fieldName.toLowerCase(), fieldVal]),\r\n      );\r\n      /* Check for contigous spaces wrapped with quotes (empty strings) */\r\n      const checkforEmpty = entry => {\r\n        return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'));\r\n      };\r\n\r\n      /* search for fields with falsy values*/\r\n      const emptyFields = requiredFields.filter(\r\n        field => !convertedRow[field] || checkforEmpty(convertedRow[field]),\r\n      );\r\n\r\n      /* The fields should be provided IF and ONLY IF the AJCC regex passes */\r\n      if (/^(AJCC)\\b/i.test($field) && emptyFields.length) {\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields are required when ${$name} is set to an AJCC option: ${arrayFormatter(\r\n            emptyFields,\r\n          )}`,\r\n        };\r\n      } else if (!/^(AJCC)\\b/i.test($field) && emptyFields.length != requiredFields.length) {\r\n        const errorFields = requiredFields.filter(fieldName => !emptyFields.includes(fieldName));\r\n        result = {\r\n          valid: false,\r\n          message: `The following fields cannot be provided when ${$name} is not set to an AJCC option: ${arrayFormatter(\r\n            errorFields,\r\n          )}`,\r\n        };\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            }
          }
        },
        "posttherapy_stage_group": {
          "restrictions": {
            "codeList": {
              "left": [
                "Occult Carcinoma",
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage A",
                "Stage B",
                "Stage C",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IAB",
                "Stage IAE",
                "Stage IAES",
                "Stage IAS",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IBE",
                "Stage IBES",
                "Stage IBS",
                "Stage IC",
                "Stage IE",
                "Stage IEA",
                "Stage IEB",
                "Stage IES",
                "Stage II",
                "Stage II bulky",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIAE",
                "Stage IIAES",
                "Stage IIAS",
                "Stage IIB",
                "Stage IIBE",
                "Stage IIBES",
                "Stage IIBS",
                "Stage IIC",
                "Stage IIE",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIAE",
                "Stage IIIAES",
                "Stage IIIAS",
                "Stage IIIB",
                "Stage IIIBE",
                "Stage IIIBES",
                "Stage IIIBS",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IIIE",
                "Stage IIIES",
                "Stage IIIS",
                "Stage IIS",
                "Stage IS",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVAE",
                "Stage IVAES",
                "Stage IVAS",
                "Stage IVB",
                "Stage IVBE",
                "Stage IVBES",
                "Stage IVBS",
                "Stage IVC",
                "Stage IVE",
                "Stage IVES",
                "Stage IVS"
              ],
              "right": [
                "Stage 0",
                "Stage 0a",
                "Stage 0is",
                "Stage I",
                "Stage IA",
                "Stage IA1",
                "Stage IA2",
                "Stage IA3",
                "Stage IB",
                "Stage IB1",
                "Stage IB2",
                "Stage IC",
                "Stage IS",
                "Stage IE",
                "Stage II",
                "Stage IIA",
                "Stage IIA1",
                "Stage IIA2",
                "Stage IIE",
                "Stage IIB",
                "Stage IIC",
                "Stage III",
                "Stage IIIA",
                "Stage IIIA1",
                "Stage IIIA2",
                "Stage IIIB",
                "Stage IIIC",
                "Stage IIIC1",
                "Stage IIIC2",
                "Stage IIID",
                "Stage IV",
                "Stage IVA",
                "Stage IVA1",
                "Stage IVA2",
                "Stage IVB",
                "Stage IVC",
                "Occult carcinoma",
                "Stage 1",
                "Stage 1A",
                "Stage 1B",
                "Stage ISA",
                "Stage ISB",
                "Stage IEA",
                "Stage IEB",
                "Stage IIEA",
                "Stage IIEB",
                "Stage IIES",
                "Stage IIESA",
                "Stage IIESB",
                "Stage IIS",
                "Stage IISA",
                "Stage IISB",
                "Stage IIIE",
                "Stage IIIEA",
                "Stage IIIEB",
                "Stage IIIES",
                "Stage IIIESA",
                "Stage IIIESB",
                "Stage IIIS",
                "Stage IIISA",
                "Stage IIISB",
                "Stage IAB",
                "Stage A",
                "Stage B",
                "Stage C"
              ],
              "data": {
                "added": [
                  "Occult carcinoma",
                  "Stage ISA",
                  "Stage ISB",
                  "Stage IIESA",
                  "Stage IIESB",
                  "Stage IISA",
                  "Stage IISB",
                  "Stage IIIEA",
                  "Stage IIIEB",
                  "Stage IIIESA",
                  "Stage IIIESB",
                  "Stage IIISA",
                  "Stage IIISB"
                ],
                "deleted": [
                  "Occult Carcinoma",
                  "Stage IAE",
                  "Stage IAES",
                  "Stage IAS",
                  "Stage IBE",
                  "Stage IBES",
                  "Stage IBS",
                  "Stage IES",
                  "Stage II bulky",
                  "Stage IIAE",
                  "Stage IIAES",
                  "Stage IIAS",
                  "Stage IIBE",
                  "Stage IIBES",
                  "Stage IIBS",
                  "Stage IIIAE",
                  "Stage IIIAES",
                  "Stage IIIAS",
                  "Stage IIIBE",
                  "Stage IIIBES",
                  "Stage IIIBS",
                  "Stage IVAE",
                  "Stage IVAES",
                  "Stage IVAS",
                  "Stage IVBE",
                  "Stage IVBES",
                  "Stage IVBS",
                  "Stage IVE",
                  "Stage IVES",
                  "Stage IVS"
                ]
              }
            },
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    const stagingName = $name\n      .trim()\n      .toLowerCase()\n      .split('_stage_group')[0];\n\n    const stagingSystem = stagingName + `_tumour_staging_system`;\n    \n    /* checks for a string just consisting of whitespace */\n    const checkforEmpty = (entry) => {return /^\\s+$/g.test(decodeURI(entry).replace(/^\"(.*)\"$/, '$1'))};\n \n    if ($row[stagingSystem] && (!$field || checkforEmpty($field))) {\n      result.valid = false;\n      const msg = `The ${stagingName}_stage_group must be submitted if the field ${stagingSystem} is submitted.`;\n      result.message = msg;\n    }\n    else if (!($row[stagingSystem]) && $field) {\n       result.valid = false;\n       const msg = `The field ${stagingSystem} must be submitted if ${stagingName}_stage_group is submitted.`;\n       result.message = msg;\n    }\n    else if ($row[stagingSystem] && $field) {\n      let codeList = [];\n      switch ($row[stagingSystem] && $row[stagingSystem].trim().toLowerCase()) {\n        case 'revised international staging system (riss)':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii'\n          ];\n          break;\n        case 'lugano staging system':\n          codeList = [\n             'stage i',\n             'stage ia',\n             'stage ib',\n             'stage ie',\n             'stage iea',\n             'stage ieb',\n             'stage ii',\n             'stage ii bulky',\n             'stage iia',\n             'stage iib',\n             'stage iie',\n             'stage iiea',\n             'stage iieb',\n             'stage iii',\n             'stage iiia',\n             'stage iiib',\n             'stage iv',\n             'stage iva',\n             'stage ivb'\n          ];\n          break;\n        case 'st jude staging system':\n          codeList = [\n            'stage i',\n            'stage ii',\n            'stage iii',\n            'stage iv'\n          ];\n          break;\n        case 'ann arbor staging system':\n          codeList = [\n            'stage i',\n            'stage ia',\n            'stage ie',\n            'stage is',\n            'stage ies',\n            'stage iae',\n            'stage ias',\n            'stage iaes',\n            'stage ib',\n            'stage ibe',\n            'stage ibs',\n            'stage ibes',\n            'stage ii',\n            'stage iia',\n            'stage iie',\n            'stage iis',\n            'stage iies',\n            'stage iiae',\n            'stage iias',\n            'stage iiaes',\n            'stage iib',\n            'stage iibe',\n            'stage iibs',\n            'stage iibes',\n            'stage iii',\n            'stage iiia',\n            'stage iiie',\n            'stage iiis',\n            'stage iiies',\n            'stage iiiae',\n            'stage iiias',\n            'stage iiiaes',\n            'stage iiib',\n            'stage iiibe',\n            'stage iiibs',\n            'stage iiibes',\n            'stage iv',\n            'stage iva',\n            'stage ive',\n            'stage ivs',\n            'stage ives',\n            'stage ivae',\n            'stage ivas',\n            'stage ivaes',\n            'stage ivb',\n            'stage ivbe',\n            'stage ivbs',\n            'stage ivbes'\n          ];\n          break;\n        case 'rai staging system':\n          codeList = [\n             'stage 0',\n             'stage i',\n             'stage ii',\n             'stage iii',\n             'stage iv'\n          ];\n          break;\n        case 'durie-salmon staging system':\n          codeList = [\n            'stage 1',\n            'stage 1a',\n            'stage 1b',\n            'stage ii',\n            'stage iia',\n            'stage iib',\n            'stage iii',\n            'stage iiia',\n            'stage iiib'\n          ];\n          break;\n        case 'figo staging system':\n          codeList = [\n            'stage ia',\n            'stage ia1',\n            'stage ia2',\n            'stage ib',\n            'stage ib1',\n            'stage ib2',\n            'stage iia',\n            'stage iab',\n            'stage iiia',\n            'stage iiib',\n            'stage iva',\n            'stage ivb'\n          ];\n          break;\n        case 'binet staging system':\n          codeList = [\n             'stage a',\n             'stage b',\n             'stage c'\n         ];\n          break;\n        case 'ajcc 8th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\n          break;\n        case 'ajcc 7th edition':\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\n];\n          break;\n        default:\n          codelist = [];\n      }\n\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\n        const msg = `'${$field}' is not a permissible value. When '${stagingSystem}' is set to '${\n          $row[stagingSystem]\n        }', '${stagingName}_stage_group' must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n\n        result.valid = false;\n        result.message = msg;\n      }\n    }\n    \n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\r\n    const {$row, $field} = inputs;\r\n    let result = { valid: true, message: 'Ok' };\r\n    if ($row.posttherapy_tumour_staging_system && $field) {\r\n      let codeList = [];\r\n      switch ($row.posttherapy_tumour_staging_system && $row.posttherapy_tumour_staging_system.trim().toLowerCase()) {\r\n        case 'revised international staging system (riss)':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii'\r\n          ];\r\n          break;\r\n        case 'lugano staging system':\r\n          codeList = [\r\n             'stage i',\r\n             'stage ia',\r\n             'stage ib',\r\n             'stage ie',\r\n             'stage iea',\r\n             'stage ieb',\r\n             'stage ii',\r\n             'stage iia',\r\n             'stage iib',\r\n             'stage iie',\r\n             'stage iiea',\r\n             'stage iieb',\r\n             'stage iii',\r\n             'stage iiia',\r\n             'stage iiib',\r\n             'stage iv',\r\n             'stage iva',\r\n             'stage ivb'\r\n          ];\r\n          break;\r\n        case 'st jude staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ii',\r\n            'stage iii',\r\n            'stage iv'\r\n          ];\r\n          break;\r\n        case 'ann arbor staging system':\r\n          codeList = [\r\n            'stage i',\r\n            'stage ia',\r\n            'stage ib',\r\n            'stage ie',\r\n            'stage is',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iie',\r\n            'stage iis',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iiie',\r\n            'stage iiis',\r\n            'stage iv',\r\n            'stage iva',\r\n            'stage ivb',\r\n            'stage ive',\r\n            'stage ivs'\r\n          ];\r\n          break;\r\n        case 'rai staging system':\r\n          codeList = [\r\n             'stage 0',\r\n             'stage i',\r\n             'stage ii',\r\n             'stage iii',\r\n             'stage iv'\r\n          ];\r\n          break;\r\n        case 'durie-salmon staging system':\r\n          codeList = [\r\n            'stage 1',\r\n            'stage 1a',\r\n            'stage 1b',\r\n            'stage ii',\r\n            'stage iia',\r\n            'stage iib',\r\n            'stage iii',\r\n            'stage iiia',\r\n            'stage iiib'\r\n          ];\r\n          break;\r\n        case 'figo staging system':\r\n          codeList = [\r\n            'stage ia',\r\n            'stage ia1',\r\n            'stage ia2',\r\n            'stage ib',\r\n            'stage ib1',\r\n            'stage ib2',\r\n            'stage iia',\r\n            'stage iab',\r\n            'stage iiia',\r\n            'stage iiib',\r\n            'stage iva',\r\n            'stage ivb'\r\n          ];\r\n          break;\r\n        case 'binet staging system':\r\n          codeList = [\r\n             'stage a',\r\n             'stage b',\r\n             'stage c'\r\n         ];\r\n          break;\r\n        case 'ajcc 8th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ia3','stage ib','stage ib1','stage ib2','stage ic','stage ie','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iie','stage iii','stage iiia','stage iiia1','stage iiia2','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iiid','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'];\r\n          break;\r\n        case 'ajcc 7th edition':\r\n          codeList = ['stage 0','stage 0a','stage 0is','stage i','stage ia','stage ia1','stage ia2','stage ib','stage ib1','stage ib2','stage ic','stage is','stage ii','stage iia','stage iia1','stage iia2','stage iib','stage iic','stage iii','stage iiia','stage iiib','stage iiic','stage iiic1','stage iiic2','stage iv','stage iva','stage iva1','stage iva2','stage ivb','stage ivc','occult carcinoma','stage 1'\r\n];\r\n          break;\r\n        default:\r\n          codelist = [];\r\n      }\r\n\r\n      if (!codeList.includes($field.trim().toLowerCase()) && codeList.length) {\r\n        const msg = `'${$field}' is not a permissible value. When 'posttherapy_tumour_staging_system' is set to '${\r\n          $row.posttherapy_tumour_staging_system\r\n        }', 'posttherapy_stage_group' must be one of the following: \\n${codeList\r\n          .map(code => `- \"${code}\"`)\r\n          .join('\\n')}`;\r\n\r\n        result.valid = false;\r\n        result.message = msg;\r\n      }\r\n    }\r\n    return result;\r\n  })"
              ]
            }
          }
        }
      },
      "created": {},
      "deleted": {}
    },
    "family_history": {
      "updated": {},
      "created": {},
      "deleted": {
        "program_id": {
          "changeType": "deleted",
          "name": "program_id",
          "valueType": "string",
          "description": "Unique identifier of the ARGO program.",
          "meta": {
            "validationDependency": true,
            "primaryId": true,
            "foreignKey": "sample_registration.program_id",
            "displayName": "Program ID"
          },
          "restrictions": { "required": true }
        },
        "submitter_donor_id": {
          "changeType": "deleted",
          "description": "Unique identifier of the donor, assigned by the data provider.",
          "name": "submitter_donor_id",
          "valueType": "string",
          "meta": {
            "validationDependency": true,
            "primaryId": true,
            "foreignKey": "sample_registration.submitter_donor_id",
            "displayName": "Submitter Donor ID"
          },
          "restrictions": { "required": true, "regex": "^[A-Za-z0-9\\-\\._]{1,64}" }
        },
        "family_relative_id": {
          "changeType": "deleted",
          "description": "Unique identifier of the relative, assigned by the data provider.",
          "name": "family_relative_id",
          "valueType": "string",
          "meta": {
            "displayName": "Family Relative ID",
            "notes": "This field is required to ensure that family members are identified in unique records.  Ids can be as simple as an incremented numeral to ensure uniqueness."
          },
          "restrictions": { "required": true, "regex": "^[A-Za-z0-9\\-\\._]{1,64}" }
        },
        "relative_with_cancer_history": {
          "changeType": "deleted",
          "description": "Indicate if donor has any genetic relatives with a history of cancer. (Reference: NCIt C159104, caDSR CDE ID 6161023)",
          "name": "relative_with_cancer_history",
          "restrictions": { "codeList": ["Yes", "No", "Unknown"] },
          "valueType": "string",
          "meta": { "displayName": "Relative with Cancer History" }
        },
        "relationship_type": {
          "changeType": "deleted",
          "description": "Indicate genetic relationship of the relative to the donor. (Reference: caDSR CDE ID 2179937)",
          "name": "relationship_type",
          "restrictions": {
            "codeList": [
              "Aunt",
              "Brother",
              "Cousin",
              "Daughter",
              "Father",
              "Grandchild",
              "Grandfather",
              "Grandmother",
              "Maternal Aunt",
              "Maternal Cousin",
              "Maternal Grandfather",
              "Maternal Grandmother",
              "Maternal Half-brother",
              "Maternal Half-sister",
              "Mother",
              "Nephew",
              "Niece",
              "Other",
              "Paternal Aunt",
              "Paternal Cousin",
              "Paternal Grandfather",
              "Paternal Grandmother",
              "Paternal Half-brother",
              "Paternal Half-sister",
              "Sister",
              "Son",
              "Unknown"
            ]
          },
          "valueType": "string",
          "meta": { "displayName": "Relationship Type" }
        },
        "gender_of_relative": {
          "changeType": "deleted",
          "description": "The self-reported gender of related individual.",
          "name": "gender_of_relative",
          "restrictions": { "codeList": ["Female", "Male", "Other", "Unknown"] },
          "valueType": "string",
          "meta": { "displayName": "Gender of Relative" }
        },
        "age_of_relative_at_diagnosis": {
          "changeType": "deleted",
          "description": "The age (in years) when the donor's relative was first diagnosed. (Reference: caDSR CDE ID 5300571)",
          "name": "age_of_relative_at_diagnosis",
          "restrictions": {
            "script": [
              "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n\n      const currField = typeof($field) === 'string' ? $field.trim().toLowerCase() : $field;\n      if ($row.relative_with_cancer_history != null) {\n         const relativeWithCancerHistory = $row.relative_with_cancer_history.trim().toLowerCase();\n         if (((relativeWithCancerHistory === \"no\") || (relativeWithCancerHistory === \"unknown\")) && currField != null) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if the 'relative_with_cancer_history' field is '${relativeWithCancerHistory}'`,\n            };\n         }\n      }\n      else {\n         if (currField || currField != null) {\n            result = { valid: false, message: `The 'relative_with_cancer_history' field must be submitted as 'Yes' if the '${$name}' field is submitted.`};\n         }\n      }\n      return result;\n  })"
            ]
          },
          "valueType": "integer",
          "meta": {
            "dependsOn": "family_history.relative_with_cancer_history",
            "displayName": "Age Of Relative At Diagnosis"
          }
        },
        "cancer_type_code_of_relative": {
          "changeType": "deleted",
          "name": "cancer_type_code_of_relative",
          "valueType": "string",
          "description": "The code to describe the malignant diagnosis of the donor's relative with a history of cancer using the WHO ICD-10 code (https://icd.who.int/browse10/2019/en) classification.",
          "restrictions": {
            "regex": "^[C|D][0-9]{2}(.[0-9]{1,3}[A-Z]{0,1})?$",
            "script": [
              "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n\n      const currField = typeof($field) === 'string' ? $field.trim().toLowerCase() : $field;\n      if ($row.relative_with_cancer_history != null) {\n         const relativeWithCancerHistory = $row.relative_with_cancer_history.trim().toLowerCase();\n         if (((relativeWithCancerHistory === \"no\") || (relativeWithCancerHistory === \"unknown\")) && currField != null) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if the 'relative_with_cancer_history' field is '${relativeWithCancerHistory}'`,\n            };\n         }\n      }\n      else {\n         if (currField || currField != null) {\n            result = { valid: false, message: `The 'relative_with_cancer_history' field must be submitted as 'Yes' if the '${$name}' field is submitted.`};\n         }\n      }\n      return result;\n  })"
            ]
          },
          "meta": {
            "examples": "C41.1,C16.9,C00.5,D46.9",
            "dependsOn": "family_history.relative_with_cancer_history",
            "displayName": "Cancer Type Code (ICD-10) of Relative"
          }
        },
        "relative_vital_status": {
          "changeType": "deleted",
          "description": "Relative's last known state of living or deceased.",
          "name": "relative_vital_status",
          "restrictions": { "codeList": ["Alive", "Deceased", "Unknown"] },
          "valueType": "string",
          "meta": { "displayName": "Vital Status of Relative" }
        },
        "cause_of_death_of_relative": {
          "changeType": "deleted",
          "description": "Indicate the cause of the death of the relative.",
          "name": "cause_of_death_of_relative",
          "restrictions": {
            "codeList": ["Died of cancer", "Died of other reasons", "Unknown"],
            "script": [
              "(function validate(inputs) {\n        const {$row, $name, $field} = inputs;\n        let result = {valid: true, message: \"Ok\"};\n        \n        if ($row.relative_vital_status && $row.relative_vital_status != null) {\n           const vitalStatus = $row.relative_vital_status.trim().toLowerCase();\n           if (($field || $field != null) && (vitalStatus === \"alive\" || vitalStatus === \"unknown\")) {\n              result = {valid: false, message: `The '${$name}' field cannot be submitted if the relative's vital_status is '${vitalStatus}'.`}\n           }\n        }\n        else {\n           if ($field || $field != null) {\n              result = {valid: false, message: `The 'relative_vital_status' field must be submitted as 'deceased' if the '${$name}' field is submitted.` }\n           }\n        }\n        return result;\n    })"
            ]
          },
          "valueType": "string",
          "meta": {
            "dependsOn": "family_history.relative_vital_status",
            "displayName": "Cause of Death of Relative"
          }
        },
        "relative_survival_time": {
          "changeType": "deleted",
          "description": "Indicate how long, in days, the relative survived from the time they were diagnosed with cancer.",
          "name": "relative_survival_time",
          "restrictions": {
            "script": [
              "(function validate(inputs) {\n      const {$row, $name, $field} = inputs;\n      let result = {valid: true, message: \"Ok\"};\n\n      const currField = typeof($field) === 'string' ? $field.trim().toLowerCase() : $field;\n      if ($row.relative_with_cancer_history != null) {\n         const relativeWithCancerHistory = $row.relative_with_cancer_history.trim().toLowerCase();\n         if (((relativeWithCancerHistory === \"no\") || (relativeWithCancerHistory === \"unknown\")) && currField != null) {\n            result = {\n               valid: false,\n               message: `The '${$name}' field should not be submitted if the 'relative_with_cancer_history' field is '${relativeWithCancerHistory}'`,\n            };\n         }\n      }\n      else {\n         if (currField || currField != null) {\n            result = { valid: false, message: `The 'relative_with_cancer_history' field must be submitted as 'Yes' if the '${$name}' field is submitted.`};\n         }\n      }\n      return result;\n  })"
            ]
          },
          "valueType": "integer",
          "meta": {
            "dependsOn": "family_history.relative_with_cancer_history",
            "units": "days",
            "displayName": "Survival Time Of Relative"
          }
        }
      }
    }
  }
}
