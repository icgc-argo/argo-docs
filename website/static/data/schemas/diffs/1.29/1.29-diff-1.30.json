{
  "schemas": {
    "specimen": {
      "updated": {
        "tumour_grade": {
          "restrictions": {
            "codeList": {
              "left": [
                "Low grade",
                "High grade",
                "GX",
                "G1",
                "G2",
                "G3",
                "G4",
                "Low",
                "High",
                "Grade I",
                "Grade II",
                "Grade III",
                "Grade IV",
                "Grade Group 1",
                "Grade Group 2",
                "Grade Group 3",
                "Grade Group 4",
                "Grade Group 5"
              ],
              "right": [
                "Low grade",
                "High grade",
                "GX",
                "G1",
                "G2",
                "G3",
                "G4",
                "Low",
                "High",
                "Intermediate",
                "Very low",
                "Grade I",
                "Grade II",
                "Grade III",
                "Grade IV",
                "Grade Group 1",
                "Grade Group 2",
                "Grade Group 3",
                "Grade Group 4",
                "Grade Group 5"
              ],
              "data": { "added": ["Intermediate", "Very low"], "deleted": [] }
            },
            "script": {
              "left": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    if ($row.tumour_grading_system && $field) {\n      let codeList = [];\n      const tieredGradingList = ['gx','g1','g2','g3'];\n      const gradingSystems = ['two-tier grading system', 'three-tier grading system', 'four-tier grading system', 'grading system for gists', 'grading system for gnets', 'isup grading system', 'who grading system for cns tumours', 'fnclcc grading system', 'gleason grade group system', 'scarff-bloom-richardson grading system', 'nuclear grading system for dcis'];\n      switch ($row.tumour_grading_system && $row.tumour_grading_system.trim().toLowerCase()) {\n        case 'two-tier grading system':\n          codeList = [\n            'low grade',\n            'high grade',\n          ];\n          break;\n        case 'three-tier grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'four-tier grading system':\n          codeList = [\n            'gx',\n            'g1',\n            'g2',\n            'g3',\n            'g4',\n          ];\n          break;\n        case 'grading system for gists':\n          codeList = [\n            'low',\n            'high',\n          ];\n          break;\n        case 'grading system for gnets':\n          codeList = tieredGradingList;\n          break;\n        case 'isup grading system':\n          codeList = [\n            'gx',\n            'g1',\n            'g2',\n            'g3',\n            'g4',\n          ];\n          break;\n        case 'who grading system for cns tumours':\n          codeList = [\n            'grade i',\n            'grade ii',\n            'grade iii',\n            'grade iv',\n          ];\n          break;\n        case 'fnclcc grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'gleason grade group system':\n          codeList = [\n            'grade group 1',\n            'grade group 2',\n            'grade group 3',\n            'grade group 4',\n            'grade group 5',\n          ];\n          break;\n        case 'scarff-bloom-richardson grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'nuclear grading system for dcis':\n          codeList = tieredGradingList;\n          break;\n        case 'unknown':\n          codeList = ['unknown'];\n          break;\n        case 'not applicable':\n          codeList = ['not applicable'];\n          break;\n      }\n\n      if (!codeList.includes($field.trim().toLowerCase())) {\n        const msg = `'${$field}' is not a permissible value. When 'tumour_grading_system' is set to '${\n          $row.tumour_grading_system\n        }', 'tumour_grade' must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n        result.valid = false;\n        result.message = msg;\n      }\n      else if (!gradingSystems.includes($row.tumour_grading_system.trim().toLowerCase())) {\n         result.valid = false;\n         const msg = `'${$row.tumour_grading_system}' is not a permissible value for 'tumour_grading_system'. If the tumour grading system you use is missing, please contact the DCC.`;\n         result.message = msg;\n      }\n    }\n    return result;\n  })"
              ],
              "right": [
                "(function validate(inputs) {\n    const {$row, $name, $field} = inputs;\n    let result = { valid: true, message: 'Ok' };\n    if ($row.tumour_grading_system && $field) {\n      let codeList = [];\n      const tieredGradingList = ['gx','g1','g2','g3'];\n      const gradingSystems = ['two-tier grading system', 'three-tier grading system', 'four-tier grading system', 'grading system for gists', 'grading system for gnets', 'isup grading system', 'who grading system for cns tumours', 'fnclcc grading system', 'gleason grade group system', 'scarff-bloom-richardson grading system', 'nuclear grading system for dcis'];\n      switch ($row.tumour_grading_system && $row.tumour_grading_system.trim().toLowerCase()) {\n        case 'two-tier grading system':\n          codeList = [\n            'low grade',\n            'high grade',\n          ];\n          break;\n        case 'three-tier grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'four-tier grading system':\n          codeList = [\n            'gx',\n            'g1',\n            'g2',\n            'g3',\n            'g4',\n          ];\n          break;\n        case 'grading system for gists':\n          codeList = [\n            'low',\n            'high',\n            'intermediate',\n            'very low'\n          ];\n          break;\n        case 'grading system for gnets':\n          codeList = tieredGradingList;\n          break;\n        case 'isup grading system':\n          codeList = [\n            'gx',\n            'g1',\n            'g2',\n            'g3',\n            'g4',\n          ];\n          break;\n        case 'who grading system for cns tumours':\n          codeList = [\n            'grade i',\n            'grade ii',\n            'grade iii',\n            'grade iv',\n          ];\n          break;\n        case 'fnclcc grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'gleason grade group system':\n          codeList = [\n            'grade group 1',\n            'grade group 2',\n            'grade group 3',\n            'grade group 4',\n            'grade group 5',\n          ];\n          break;\n        case 'scarff-bloom-richardson grading system':\n          codeList = tieredGradingList;\n          break;\n        case 'nuclear grading system for dcis':\n          codeList = tieredGradingList;\n          break;\n        case 'unknown':\n          codeList = ['unknown'];\n          break;\n        case 'not applicable':\n          codeList = ['not applicable'];\n          break;\n      }\n\n      if (!codeList.includes($field.trim().toLowerCase())) {\n        const msg = `'${$field}' is not a permissible value. When 'tumour_grading_system' is set to '${\n          $row.tumour_grading_system\n        }', 'tumour_grade' must be one of the following: \\n${codeList\n          .map(code => `- \"${code}\"`)\n          .join('\\n')}`;\n        result.valid = false;\n        result.message = msg;\n      }\n      else if (!gradingSystems.includes($row.tumour_grading_system.trim().toLowerCase())) {\n         result.valid = false;\n         const msg = `'${$row.tumour_grading_system}' is not a permissible value for 'tumour_grading_system'. If the tumour grading system you use is missing, please contact the DCC.`;\n         result.message = msg;\n      }\n    }\n    return result;\n  })"
              ]
            }
          }
        }
      },
      "created": {},
      "deleted": {}
    },
    "surgery": {
      "updated": {
        "surgery_type": {
          "restrictions": {
            "codeList": {
              "left": [
                "Axillary Clearance",
                "Axillary lymph nodes sampling",
                "Biopsy",
                "Bypass Gastrojejunostomy",
                "Cholecystectomy",
                "Cholecystojejunostomy",
                "Completion gastrectomy",
                "Debridement of pancreatic and peripancreatic necrosis",
                "Debulking",
                "Distal subtotal pancreatectomy",
                "Drainage of abscess",
                "Duodenal preserving pancreatic head resection",
                "Endoscopic biopsy",
                "Endoscopic brushings of GIT",
                "Enucleation",
                "Esophageal bypass surgery/jejunostomy only",
                "Exploratory laparotomy",
                "Fine needle aspiration biopsy",
                "Gastric Antrectomy",
                "Hemithyroidectomy",
                "Hepaticojejunostomy",
                "Ivor Lewis subtotal esophagectomy",
                "Laparotomy (Open and Shut)",
                "Left thoracoabdominal incision",
                "Lobectomy",
                "Mammoplasty",
                "Mastectomy",
                "McKeown esophagectomy",
                "Merendino procedure",
                "Minimally invasive esophagectomy",
                "Near-total thyroidectomy",
                "Pancreaticoduodenectomy",
                "Pancreaticojejunostomy, side-to-side anastomosis",
                "Pneumonectomy",
                "Proximal subtotal gastrectomy",
                "Pylorus-sparing Whipple operation",
                "Radical pancreaticoduodenectomy",
                "Reexcision",
                "Segmentectomy",
                "Sentinal Lymph Node Biopsy",
                "Spleen preserving distal pancreatectomy",
                "Splenectomy",
                "Subtotal pancreatectomy",
                "Subtotal thyroidectomy",
                "Thoracotomy (Open & Shut)",
                "Total gastrectomy",
                "Total gastrectomy with extended lymphadenectomy",
                "Total pancreatectomy",
                "Total thyroidectomy",
                "Transhiatal esophagectomy",
                "Triple bypass of pancreas",
                "Wedge/localised gastric resection",
                "Wide Local Excision"
              ],
              "right": [
                "Axillary Clearance",
                "Axillary lymph nodes sampling",
                "Biopsy",
                "Bypass Gastrojejunostomy",
                "Cholecystectomy",
                "Cholecystojejunostomy",
                "Completion gastrectomy",
                "Debridement of pancreatic and peripancreatic necrosis",
                "Debulking",
                "Distal subtotal pancreatectomy",
                "Drainage of abscess",
                "Duodenal preserving pancreatic head resection",
                "Endoscopic biopsy",
                "Endoscopic brushings of GIT",
                "Enucleation",
                "Esophageal bypass surgery/jejunostomy only",
                "Exploratory laparotomy",
                "Fine needle aspiration biopsy",
                "Gastric Antrectomy",
                "Hemithyroidectomy",
                "Hepaticojejunostomy",
                "Hysterectomy",
                "Ivor Lewis subtotal esophagectomy",
                "Laparotomy (Open and Shut)",
                "Left thoracoabdominal incision",
                "Lobectomy",
                "Lymphadenectomy",
                "Mammoplasty",
                "Mastectomy",
                "McKeown esophagectomy",
                "Merendino procedure",
                "Minimally invasive esophagectomy",
                "Near-total thyroidectomy",
                "Pancreaticoduodenectomy",
                "Pancreaticojejunostomy, side-to-side anastomosis",
                "Pneumonectomy",
                "Proximal subtotal gastrectomy",
                "Pylorus-sparing Whipple operation",
                "Radical pancreaticoduodenectomy",
                "Reexcision",
                "Segmentectomy",
                "Sentinal Lymph Node Biopsy",
                "Spleen preserving distal pancreatectomy",
                "Splenectomy",
                "Subtotal pancreatectomy",
                "Subtotal thyroidectomy",
                "Thoracotomy (Open & Shut)",
                "Total gastrectomy",
                "Total gastrectomy with extended lymphadenectomy",
                "Total pancreatectomy",
                "Total thyroidectomy",
                "Transhiatal esophagectomy",
                "Triple bypass of pancreas",
                "Wedge/localised gastric resection",
                "Wide Local Excision"
              ],
              "data": { "added": ["Hysterectomy", "Lymphadenectomy"], "deleted": [] }
            }
          }
        }
      },
      "created": {},
      "deleted": {}
    }
  }
}
